!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=23)}([function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},function(t,e,i){},function(t,e,i){"use strict";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],s=0;s<i;){var r=e[s];if(t.call(n,r,s,e))return r;s++}}})},function(t,e){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return!1;for(var s=0|e,r=Math.max(s>=0?s:n-Math.abs(s),0);r<n;){if(function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}(i[r],t))return!0;r++}return!1}})},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){(function(t){var n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),i={},n=0;n<e.length;n++)i[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return i},s=/%[sdj%]/g;e.format=function(t){if(!f(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(a(arguments[i]));return e.join(" ")}i=1;for(var n=arguments,r=n.length,o=String(t).replace(s,(function(t){if("%%"===t)return"%";if(i>=r)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}default:return t}})),l=n[i];i<r;l=n[++i])g(l)||!E(l)?o+=" "+l:o+=" "+a(l);return o},e.deprecate=function(i,n){if(void 0!==t&&!0===t.noDeprecation)return i;if(void 0===t)return function(){return e.deprecate(i,n).apply(this,arguments)};var s=!1;return function(){if(!s){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),s=!0}return i.apply(this,arguments)}};var r,o={};function a(t,i){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(i)?n.showHidden=i:i&&e._extend(n,i),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),d(n,t,n.depth)}function l(t,e){var i=a.styles[e];return i?"["+a.colors[i][0]+"m"+t+"["+a.colors[i][1]+"m":t}function c(t,e){return t}function d(t,i,n){if(t.customInspect&&i&&T(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var s=i.inspect(n,t);return f(s)||(s=d(t,s,n)),s}var r=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(f(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}if(b(e))return t.stylize(""+e,"number");if(m(e))return t.stylize(""+e,"boolean");if(g(e))return t.stylize("null","null")}(t,i);if(r)return r;var o=Object.keys(i),a=function(t){var e={};return t.forEach((function(t,i){e[t]=!0})),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(i)),w(i)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return h(i);if(0===o.length){if(T(i)){var l=i.name?": "+i.name:"";return t.stylize("[Function"+l+"]","special")}if(C(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(v(i))return t.stylize(Date.prototype.toString.call(i),"date");if(w(i))return h(i)}var c,E="",P=!1,S=["{","}"];(p(i)&&(P=!0,S=["[","]"]),T(i))&&(E=" [Function"+(i.name?": "+i.name:"")+"]");return C(i)&&(E=" "+RegExp.prototype.toString.call(i)),v(i)&&(E=" "+Date.prototype.toUTCString.call(i)),w(i)&&(E=" "+h(i)),0!==o.length||P&&0!=i.length?n<0?C(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),c=P?function(t,e,i,n,s){for(var r=[],o=0,a=e.length;o<a;++o)L(e,String(o))?r.push(u(t,e,i,n,String(o),!0)):r.push("");return s.forEach((function(s){s.match(/^\d+$/)||r.push(u(t,e,i,n,s,!0))})),r}(t,i,n,a,o):o.map((function(e){return u(t,i,n,a,e,P)})),t.seen.pop(),function(t,e,i){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1];return i[0]+e+" "+t.join(", ")+" "+i[1]}(c,E,S)):S[0]+E+S[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function u(t,e,i,n,s,r){var o,a,l;if((l=Object.getOwnPropertyDescriptor(e,s)||{value:e[s]}).get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),L(n,s)||(o="["+s+"]"),a||(t.seen.indexOf(l.value)<0?(a=g(i)?d(t,l.value,null):d(t,l.value,i-1)).indexOf("\n")>-1&&(a=r?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),y(o)){if(r&&s.match(/^\d+$/))return a;(o=JSON.stringify(""+s)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function p(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function g(t){return null===t}function b(t){return"number"==typeof t}function f(t){return"string"==typeof t}function y(t){return void 0===t}function C(t){return E(t)&&"[object RegExp]"===P(t)}function E(t){return"object"==typeof t&&null!==t}function v(t){return E(t)&&"[object Date]"===P(t)}function w(t){return E(t)&&("[object Error]"===P(t)||t instanceof Error)}function T(t){return"function"==typeof t}function P(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(i){if(y(r)&&(r=t.env.NODE_DEBUG||""),i=i.toUpperCase(),!o[i])if(new RegExp("\\b"+i+"\\b","i").test(r)){var n=t.pid;o[i]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",i,n,t)}}else o[i]=function(){};return o[i]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=m,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=b,e.isString=f,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=y,e.isRegExp=C,e.isObject=E,e.isDate=v,e.isError=w,e.isFunction=T,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(20);var x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),x[t.getMonth()],e].join(" ")}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",A(),e.format.apply(e,arguments))},e.inherits=i(21),e._extend=function(t,e){if(!e||!E(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t};var M="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function k(t,e){if(!t){var i=new Error("Promise was rejected with a falsy value");i.reason=t,t=i}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(M&&t[M]){var e;if("function"!=typeof(e=t[M]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,M,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,i,n=new Promise((function(t,n){e=t,i=n})),s=[],r=0;r<arguments.length;r++)s.push(arguments[r]);s.push((function(t,n){t?i(t):e(n)}));try{t.apply(this,s)}catch(t){i(t)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),M&&Object.defineProperty(e,M,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,n(t))},e.promisify.custom=M,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function i(){for(var i=[],n=0;n<arguments.length;n++)i.push(arguments[n]);var s=i.pop();if("function"!=typeof s)throw new TypeError("The last argument must be of type Function");var r=this,o=function(){return s.apply(r,arguments)};e.apply(this,i).then((function(e){t.nextTick(o,null,e)}),(function(e){t.nextTick(k,e,o)}))}return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),Object.defineProperties(i,n(e)),i}}).call(this,i(19))},function(t,e){var i,n,s=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var l,c=[],d=!1,h=-1;function u(){d&&l&&(d=!1,l.length?c=l.concat(c):h=-1,c.length&&p())}function p(){if(!d){var t=a(u);d=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,d=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function g(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new m(t,e)),1!==c.length||d||a(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){},function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return ot}));var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),s=new Uint8Array(16);function r(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(s)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var a=function(t){return"string"==typeof t&&o.test(t)},l=[],c=0;c<256;++c)l.push((c+256).toString(16).substr(1));var d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(l[t[e+0]]+l[t[e+1]]+l[t[e+2]]+l[t[e+3]]+"-"+l[t[e+4]]+l[t[e+5]]+"-"+l[t[e+6]]+l[t[e+7]]+"-"+l[t[e+8]]+l[t[e+9]]+"-"+l[t[e+10]]+l[t[e+11]]+l[t[e+12]]+l[t[e+13]]+l[t[e+14]]+l[t[e+15]]).toLowerCase();if(!a(i))throw TypeError("Stringified UUID is invalid");return i};var h=function(t,e,i){var n=(t=t||{}).random||(t.rng||r)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){i=i||0;for(var s=0;s<16;++s)e[i+s]=n[s];return e}return d(n)};var u={PRICING_SOURCE:{SRPDB:"SRPDB",PELICAN:"PELICAN",DR:"DR"},MONTHLY_BASE_DIVISORS:{1:{YEAR:12,MONTH:1},2:{YEAR:24},3:{YEAR:36}},ANNUAL_BASE_DIVISORS:{1:{YEAR:1},2:{YEAR:2},3:{YEAR:3}},PRICING_COMPARISON_TERMS:{ANNUAL:{term:"YEAR",count:"1"},MONTHLY:{term:"MONTH",count:"1"}},CURRENCY:{separator:"|",defaultHeader:"moneda",flagsPath:"/content/dam/flags/",localStorageKey:"currencyCode",eventUpdate:"updateCurrency"},CURRENCY_SELECTOR_FLAGS_SVG_SHARED_PROPS:{WRAPPER:{height:"0",width:"0",style:"position:absolute"},viewBox:"0 0 640 480"},DEFAULT_CURRENCIES:{en_US:"USD",fr_CA:"CAD",en_CA:"CAD",es_MX:"MXN",en_AU:"AUD",zh_CN:"CNY",ja_JP:"JPY",ko_KR:"KRW",zh_TW:"USD",en_IN:"INR",en_MY:"MYR",en_NZ:"NZD",en_SG:"SGD",en_HK:"USD",en_ZA:"USD",en_AE:"USD",pt_BR:"BRL",es_AR:"USD",cs_CZ:"CZK",da_DK:"DKK",de_DE:"EUR",de_CH:"CHF",en_GB:"GBP",es_ES:"EUR",fr_BE:"EUR",fr_FR:"EUR",fr_CH:"CHF",hu_HU:"EUR",it_IT:"EUR",it_CH:"CHF",nl_BE:"EUR",en_IE:"EUR",en_NL:"EUR",nl_NL:"EUR",no_NO:"NOK",pl_PL:"PLN",pt_PT:"EUR",fi_FI:"EUR",sv_SE:"SEK",ru_RU:"RUB",tr_TR:"TRY"},LATAM_CURRENCY_CODES:{US:"icon-flag-us",CO:"icon-flag-co",CL:"icon-flag-cl",AR:"icon-flag-ar"},CTA_CONFIG:{flex:{wrapper:{styles:"buy-component-flex-buttons-wrapper"},primary:{styles:"cmp-button wd-button pc-brand theme-product-center buy-component-call-to-action-button-flex",analytics:{"data-wat-content-name":"fsbf","data-wat-content-type":"waf-flex","data-wat-product-line-code":"FLEXACCESS","data-wat-configurator-link-type":"add-to-cart-flex","data-wat-configurator-quantity":"1","data-wat-configurator-support-level":"advanced"}},secondary:{styles:"cmp-button wd-button pc-brand theme-product-center buy-component-call-to-action-button-secondary",analytics:{"data-wat-flex-estimator":"true"}},btnElementNames:["ctaPrimaryButton","ctaSecondaryButton"]},buy:{primary:{styles:"cmp-button wd-button wd-uppercase pc-brand theme-product-center buy-component-call-to-action-button",analytics:{"data-automation-id":"buy-component-call-to-action","data-wat-content-name":"fsb","data-wat-content-type":"waf-buy","data-wat-product-line-code":"ACDIST","data-wat-configurator-link-type":"add to cart","data-wat-configurator-term":"1-YEAR","data-wat-configurator-pid":"24040","data-wat-configurator-quantity":"1","data-wat-configurator-support-level":"ADVANCED"}}},buttonContainer:{styles:"buy-component-cta small-12 medium-5 large-3 theme-product-center"},buttonText:{primary:{styles:"buy-component-cta-btn-text cmp-button__text"},secondary:{styles:"buy-component-cta-btn-text cmp-button__text pc-brand theme-product-center"}},guaranteeText:{styles:"buy-component-call-to-action-guarantee wd-ma-0 wd-italic wd-font-12",analytics:{"data-automation-id":"buy-component-money-back-guarantee"}}},FLEX_FILTER:{minFlexQuantity:500,maxFlexQuantity:1e4,defaultQuantities:[500,1e3,5e3,1e4],supportLevel:"Advanced Support",varies:"Varies"}};!function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}}();var p=new class{constructor(){}isEmptyString(t){return!t||0===t.length}isFalsy(t){return!t||"false"===this.unifyString(t)}isTruthy(t){return!!t&&"true"===this.unifyString(t)}getFormattedPrice(t,e){if(!e||!t)return"";const{pattern:i,symbol:n,grouping:s,decimal:r,fraction:o,countryCode:a}=t;e=e.toFixed(o).replace(".","{d}");let l=i.match(/^Â¤\s?/),c=i.match(/\s?Â¤$/);return l=l?l[0].replace("Â¤",n):"",c=c?c[0].replace("Â¤",n):"","IN"===a?"".concat(l).concat(l.match(/\s+/)?"":" ").concat(e.replace(/(\d)(?=(\d{2})+\d$)/g,"$1,")):"".concat(l).concat(e.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+s).replace("{d}",r)).concat(c?" "+c:"")}hasPromotion(t){if(t)for(let e=0;e<t.length;e++)if(t[e].discount&&parseFloat(t[e].discount)>0&&t[e].promotion)return!0;return!1}getAmountFormatted(t){return t.vatAmount>0?t.amountAfterDiscountWithVatFormatted:t.amountFormatted}getAmountUnformatted(t){return t.vatAmount>0?t.amountAfterDiscountWithVat:t.amount}getAmountBeforeDiscountFormatted(t){return t.vatAmount>0?t.amountBeforeDiscountWithVatFormatted:t.amountBeforeDiscountFormatted}getAmountBeforeDiscount(t){return(null==t?void 0:t.vatAmount)>0?t.amountBeforeDiscountWithVat:t.amountBeforeDiscount}getPpgAmountBeforeDiscount(t){return(null==t?void 0:t.vatAmount)>0?t.amountBeforeDiscountWithVat:t.amountBeforeDiscount}isDiscounted(t){let e=t.vatAmount>0,i=!1;try{i=e?parseFloat(t.amountAfterDiscountWithVat)<parseFloat(t.amountBeforeDiscountWithVat):parseFloat(t.amount)<parseFloat(t.amountBeforeDiscount)}catch(t){console.error("Utilities: isDiscounted ",t)}return i}calculateMonthlySavings(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{term:s,count:r}=t;let o=this.getBillingPlanByTerm(t,e,i);const a=n?o:o.price;let l=this.getAmountUnformatted(a),c=this.isMonthlyTermAvailable(e),d=this.isAnnualTermAvailable(e);if(!c&&!d)return null;let h=this.getDivisorForSavings(s,r,c),u=parseFloat(l)/h,p=this.getBasePrice(e,i,n);return{percentage:this.getPercentageSavings(p,u),termConfigKey:c?"monthly-saving":"annual-saving"}}getDivisorForSavings(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YEAR",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";return((arguments.length>2?arguments[2]:void 0)?u.MONTHLY_BASE_DIVISORS:u.ANNUAL_BASE_DIVISORS)[e][t]}getBasePrice(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.getTermToCompare(t),s=this.getBillingPlanByTerm(n,t,e),r=i?s:s.price;return parseFloat(this.getAmountUnformatted(r))}getTermToCompare(t){return this.isMonthlyTermAvailable(t)?u.PRICING_COMPARISON_TERMS.MONTHLY:u.PRICING_COMPARISON_TERMS.ANNUAL}getBillingPlanByTerm(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.find(e=>i||t&&t.flex?e.billingQuantity===t.tokenCount:e.billingPeriodCount===t.count&&e.billingPeriod===t.term);return n||e.find(t=>"1"===t.billingPeriodCount&&"YEAR"===t.billingPeriod)}isMonthlyTermAvailable(t){return t.some(t=>t.billingPeriodCount===u.PRICING_COMPARISON_TERMS.MONTHLY.count&&t.billingPeriod===u.PRICING_COMPARISON_TERMS.MONTHLY.term)}isAnnualTermAvailable(t){return t.some(t=>t.billingPeriodCount===u.PRICING_COMPARISON_TERMS.ANNUAL.count&&t.billingPeriod===u.PRICING_COMPARISON_TERMS.ANNUAL.term)}getPercentageSavings(t,e){let i=t-e;return Math.round(100*i/t)}getBillingPriceId(t,e,i,n){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=t.purchaseTypes;for(const t in r){const o=r[t].billingPlans;let a,l;return l=s&&n?o.find(t=>t.billingPeriod===e&&t.billingPeriodCount===i&&t.billingQuantity===n):o.find(t=>t.billingPeriod===e&&t.billingPeriodCount===i),l&&(a=l.price.priceId),a}}getPpgPriceId(t,e,i){let n;const s=t.prices.find(t=>t.billingPeriod===e&&t.billingPeriodCount===i);return s&&(n=s.priceId),n}generateUuid(){return h()}retrieveUuid(){return localStorage.getItem("estoreVisitorId")||localStorage.setItem("estoreVisitorId",this.generateUuid()),localStorage.getItem("estoreVisitorId")}initCurrency(t,e){const i=this.unifyString(this.getFromLocalStorage(u.CURRENCY.localStorageKey)||t);return this.isCurrencyValid(i,t,e)?i:t}isCurrencyValid(t,e,i){return t===e||i.indexOf(t)>-1}createCtaButtonSvg(){const t=this.createElement("span",{class:"icon-svg-arrow-span"}),e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS(null,"class","icon-svg-arrow-button wd-icon"),e.setAttributeNS(null,"viewBox","0 0 30.94 100");const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("fill-rule","evenodd"),i.setAttribute("d","M30.94 50l-24-24L0 32.94 17.06 50 0 67.06 6.94 74z"),e.appendChild(i),t.appendChild(e),t}createTooltipSvg(t){try{const e=JSON.stringify(t),i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("data-tooltip",e),i.setAttributeNS(null,"class","MuiSvgIcon-root DhigSvgIcon DhigSvgIcon--type--display-icon DhigSvgIcon--size--small dhig-ml-1 tooltip-icon");const n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttribute("href","#dhig--icons--utility--info-outline"),i.appendChild(n),i}catch(t){return console.error("JSON error. Failed to createTooltipSvg: ",t),null}}appendChildren(t,e){e.map(e=>{t.appendChild(e)})}createElement(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=document.createElement(t);return Object.keys(e).map(t=>n.setAttribute(t,e[t])),i&&(n.innerHTML=i),n}createElementNS(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=document.createElementNS(t,e);return Object.keys(i).map(t=>s.setAttribute(t,i[t])),n&&(s.innerHTML=n),s}getAttributeMap(){return{config:"config"}}setAttributes(t,e){Object.keys(e).forEach(i=>{t.setAttribute(i,e[i])})}normalizeProductInfo(t){let e={vatAmount:"0",vatAmountFormatted:"0",amountBeforeDiscountWithVat:"0",amountBeforeDiscountWithVatFormatted:"0",amountAfterDiscountWithVat:"0",amountAfterDiscountWithVatFormatted:"0"},i=t?t.purchaseTypes:"";if(!i)return t;try{return Object.assign({},t,{purchaseTypes:Object.keys(i).reduce((t,n)=>(t[n]=Object.assign({},i[n],{billingPlans:i[n].billingPlans.map(t=>{return Object.assign({},{promotion:{}},t,{price:Object.assign({},(i=t.price,Object.assign({},e,{amountBeforeDiscount:i.amount})),t.price)});var i})}),t),[])})}catch(e){return console.error("PDS normalization error was ",e),t}}setAlternateCTAButton(t,e){try{return t.resellerUrl=e["alternate-cta-button-url"],e["find-a-reseller"]=e["alternate-cta-button-text"],!0}catch(t){return console.error("Setting alternate CTA Button failed",t),!1}}convertStrToUniformArr(t,e){return this.unifyString(t).split(e)}unifyString(t){return t&&"string"==typeof t?t.replace(/\s/g,"").toLowerCase():""}getFromLocalStorage(t){let e="";try{e=localStorage.getItem(t)}catch(t){console.error("Error on getting value from local storage",t)}return e}setLocalStorage(t,e){try{localStorage.setItem(t,e)}catch(t){console.error("Error on setting local storage",t)}}getPurchaseType(t){return t.purchaseTypes.find(t=>"ADVANCED"===t.supportLevel)}saveSelectedTerm(t,e){const i="nonsensitive-bc-term-"+t+"-"+(document.documentElement.lang||"en-US");try{window.sessionStorage.setItem(i,JSON.stringify(e))}catch(t){console.error("could not save invalid term",t)}}getSelectedTerm(t){let e;if((!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e=(t=>{const e=["1-MONTH","1-YEAR","3-YEAR","100","250","500","1000","5000","10000","Varies"],i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(window.location.search);if(i&&i.length>1){if(-1===e.indexOf(i[1]))return null;let t=i[1].split("-");return 1===t.length?{term:"YEAR",count:"1",tokenCount:t[0],flex:!0}:{term:t[1],count:t[0],tokenCount:"0"}}return null})("term"),e&&("FLEXACCESS"!==t||"0"!==e.tokenCount)))return e;const i="nonsensitive-bc-term-"+t+"-"+(document.documentElement.lang||"en-US"),n=window.sessionStorage.getItem(i);if(n)try{return JSON.parse(n)}catch(t){console.error("invalid term",t)}return null}getParameterValue(t){const e=window.location.search.replace(/\?/,""),i=t.length+1;if(!e)return null;const n=e.split("&").find(e=>e.substr(0,i)===t+"=");if(!n)return null;const s=n.split("=");return s.length<2?null:s[1]}contentFragmentStringReplacer(t,e){const i=t.match(/\{/g);if(!i||i.length!==e.length)return console.error("Error performing CF field replacement"),"";let n=t;return e.forEach((t,e)=>{n=n.replace("{"+e+"}",t)}),n}getAddToCartURL(t,e,i,n,s){let r="",o=!1;for(let a=0;a<t.length;a++)if(t[a].billingQuantity===n&&s.flex||t[a].billingPeriod===e&&t[a].billingPeriodCount===i&&!s.flex){r=t[a].directToCartUrl,o=t[a].billingQuantity&&isNaN(t[a].billingQuantity);break}return o?r:r.concat("&visitorId=",this.retrieveUuid())}formatPercentageByLocale(t,e){const i=t>1?t/100:t;return new Intl.NumberFormat(e,{style:"percent"}).format(i)}getDefaultCurrency(t){return t=t.replace("-","_"),u.DEFAULT_CURRENCIES[t]||"USD"}setPpgEnabledState(t){this.ppgEnabled=t}setSubscriptionPpgEnabledState(t){this.subscriptionPpgEnabled=t}setSubscriptionMyabPpgEnabledState(t){this.subscriptionMyabPpgEnabled=t}setNewBuyPanelEnabledState(t){this.newBuyPanelEnabled=t}setFlexIncentivesEnabledState(t){this.flexIncentivesEnabled=t}processLatamPrices(t,e){let i=t.prices.filter(t=>t.currency===e);t.prices=i}addPdsFields(t,e,i){let n;const s={autoRenewal:!1,billingPeriod:"YEAR",billingPeriodCount:"1",billingQuantity:"",directToCartUrl:"",price:{}};if(!t||!t.prices)return void console.error("ppgData either missing or lacks prices key");1!==t.currencyFormats.length&&e?n=t.currencyFormats.find(t=>t.currency===e):(n=t.currencyFormats[0],e=e||n.currency);let r=t.prices.filter(t=>t.currency===e).sort((t,e)=>t.billingQuantity>e.billingQuantity),o=r.map(t=>{let e={};Object.keys(t).forEach(i=>{"apolloAttributes"!==i&&"billing"!==i.substr(0,7)&&(e[i]=t[i])});let i={autoRenewal:t.autoRenewal||!1,billingPeriod:t.billingPeriod,billingPeriodCount:t.billingPeriodCount,billingQuantity:t.billingQuantity,directToCartUrl:t.directToCartUrl||"",price:e};return Object.assign({},s,i)}),a={};Object.keys(r[0]).forEach(t=>{a[t]=""});let l=!!i["flex-estimator-tool-url"]&&i["flex-estimator-tool-url"].indexOf("?")>=0,c=i.originalPlc?(l?"&":"?")+"plc="+i.originalPlc:"",d={billingQuantity:i["ppg-custom-term-text-varies"],price:a,directToCartUrl:i["flex-estimator-tool-url"]+c},h=Object.assign({},s,d);"FLEXACCESS"===t.productLineCode&&o.push(h),t.purchaseTypes=[{name:t.name,supportLevel:"ADVANCED",billingPlans:o}],t.currency=e,t.currencyFormat=n}};i(1);class m extends HTMLElement{constructor(){super(),this.tooltipTitle="",this.tooltipText="",this.tooltipLink="",this.tooltipLinkLabel=""}static get DEFAULTS(){return{props:{tooltipTitle:"flex-tooltip-title",tooltipText:"flex-tooltip-text",tooltipLink:"flex-tooltip-link",tooltipLinkLabel:"flex-tooltip-link-label"},selectors:{tab:".cmp-tabs__tab.flex",newLabel:".dc-new-feature"},classNames:{tabTooltip:"dc-tab-tooltip dhig-theme--light",tabTooltipWrapper:"dc-tab-tooltip-wrapper dhig-typography-body-copy-medium",arrow:"dc-arrow",container:"dc-container dhig-p-2",content:"dc-content",visible:"dc-visible",tooltipTitle:"dhig-typography-headline-smallest dhig-m-0",tooltipText:"dhig-typography-smallprint dhig-m-0 dhig-mt-2"},sizes:{minDesktop:799}}}setConfig(t){this.config=t}setTooltipParent(t){this.tooltipParent=t}setTooltipTitle(t){this.tooltipTitle=t}setTooltipText(t){this.tooltipText=t}setTooltipLink(t){this.tooltipLink=t}setTooltipLinkLabel(t){this.tooltipLinkLabel=t}hasTooltipTitle(){return!!this.tooltipTitle}hasTooltipText(){return!!this.tooltipText}hasTooltipLink(){return!!this.tooltipLink&&!!this.tooltipLinkLabel}hasTooltipValues(){return this.hasTooltipText()||this.hasTooltipLink()||this.hasTooltipTitle()}hasMacros(t){return!!t&&t.trim().length>0&&!!t.match(/{\d}/gim)}createDOM(){try{if(this.setTooltipTitle(this.config[m.DEFAULTS.props.tooltipTitle]),this.setTooltipText(this.config[m.DEFAULTS.props.tooltipText]),this.setTooltipLink(this.config[m.DEFAULTS.props.tooltipLink]),this.setTooltipLinkLabel(this.config[m.DEFAULTS.props.tooltipLinkLabel]),!this.hasTooltipValues())return void console.warn("TabTooltip.createDOM: no tooltip");let t=this.tooltipParent,e=document.createElement("div"),i=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),r=document.createElement("div"),o=null;if(e.setAttribute("class",m.DEFAULTS.classNames.tabTooltip),i.setAttribute("class",m.DEFAULTS.classNames.tabTooltipWrapper),n.setAttribute("class",m.DEFAULTS.classNames.arrow),s.setAttribute("class",m.DEFAULTS.classNames.container),r.setAttribute("class",m.DEFAULTS.classNames.content),this.hasTooltipTitle()){let t=document.createElement("p");t.setAttribute("class",m.DEFAULTS.classNames.tooltipTitle),t.innerText=this.tooltipTitle,r.appendChild(t)}if(this.hasTooltipLink()&&(o=document.createElement("a"),o.setAttribute("href",this.tooltipLink),o.className="tab-tooltip-link",o.innerText=this.tooltipLinkLabel),this.hasTooltipText()){let t=document.createElement("div");this.tooltipText.split("\n").forEach(e=>{let i=document.createElement("p");i.setAttribute("class",m.DEFAULTS.classNames.tooltipText),i.innerText=e,this.hasMacros(e)&&this.hasTooltipLink()&&(i.innerHTML=this.getTextWithLink(i,o)),t.appendChild(i)}),r.appendChild(t)}else this.hasTooltipLink()&&r.appendChild(o);i.appendChild(n),s.appendChild(r),i.appendChild(s),e.appendChild(i),t.addEventListener("click",()=>{e.classList.contains(m.DEFAULTS.classNames.visible)?e.classList.remove(m.DEFAULTS.classNames.visible):e.classList.add(m.DEFAULTS.classNames.visible)}),t.addEventListener("mouseover",()=>{e.classList.add(m.DEFAULTS.classNames.visible)}),t.addEventListener("mouseleave",()=>{e.classList.remove(m.DEFAULTS.classNames.visible)}),e.addEventListener("click",t=>{t.stopPropagation()}),document.addEventListener("scroll",()=>{e.classList.contains(m.DEFAULTS.classNames.visible)&&e.classList.remove(m.DEFAULTS.classNames.visible)}),window.addEventListener("resize",()=>{this.alignTooltip(t,e)}),this.appendChild(e),this.alignTooltip(t,e)}catch(t){console.error("TabTooltip.createDOM:",t)}}alignTooltip(t,e){try{if(window.innerWidth<=m.DEFAULTS.sizes.minDesktop){const i=t.querySelector(m.DEFAULTS.selectors.newLabel);i&&(e.style.marginRight=i.offsetWidth/2+"px")}else e.removeAttribute("style")}catch(t){console.error("TabTooltip.alignTooltip:",t)}}getTextWithLink(t,e){try{return t.outerHTML.replace(/{\d}/gim,e.outerHTML)}catch(e){return console.error("TabTooltip>getTextWithLink:",e),t}}connectedCallback(){this.createDOM()}}window&&window.customElements&&window.customElements.define("tab-tooltip",m);var g="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==g&&g,b="URLSearchParams"in g,f="Symbol"in g&&"iterator"in Symbol,y="FileReader"in g&&"Blob"in g&&function(){try{return new Blob,!0}catch(t){return!1}}(),C="FormData"in g,E="ArrayBuffer"in g;if(E)var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=ArrayBuffer.isView||function(t){return t&&v.indexOf(Object.prototype.toString.call(t))>-1};function T(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function P(t){return"string"!=typeof t&&(t=String(t)),t}function S(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return f&&(e[Symbol.iterator]=function(){return e}),e}function x(t){this.map={},t instanceof x?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function A(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function L(t){return new Promise((function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}}))}function M(t){var e=new FileReader,i=L(e);return e.readAsArrayBuffer(t),i}function k(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function D(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:y&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:C&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:b&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():E&&y&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=k(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):E&&(ArrayBuffer.prototype.isPrototypeOf(t)||w(t))?this._bodyArrayBuffer=k(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y&&(this.blob=function(){var t=A(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=A(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(M)}),this.text=function(){var t,e,i,n=A(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,i=L(e),e.readAsText(t),i;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),i=new Array(e.length),n=0;n<e.length;n++)i[n]=String.fromCharCode(e[n]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},C&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}x.prototype.append=function(t,e){t=T(t),e=P(e);var i=this.map[t];this.map[t]=i?i+", "+e:e},x.prototype.delete=function(t){delete this.map[T(t)]},x.prototype.get=function(t){return t=T(t),this.has(t)?this.map[t]:null},x.prototype.has=function(t){return this.map.hasOwnProperty(T(t))},x.prototype.set=function(t,e){this.map[T(t)]=P(e)},x.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},x.prototype.keys=function(){var t=[];return this.forEach((function(e,i){t.push(i)})),S(t)},x.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),S(t)},x.prototype.entries=function(){var t=[];return this.forEach((function(e,i){t.push([i,e])})),S(t)},f&&(x.prototype[Symbol.iterator]=x.prototype.entries);var I=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function B(t,e){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,n,s=(e=e||{}).body;if(t instanceof B){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new x(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,s||null==t._bodyInit||(s=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new x(e.headers)),this.method=(i=e.method||this.method||"GET",n=i.toUpperCase(),I.indexOf(n)>-1?n:i),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function O(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var i=t.split("="),n=i.shift().replace(/\+/g," "),s=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(s))}})),e}function N(t,e){if(!(this instanceof N))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new x(e.headers),this.url=e.url||"",this._initBody(t)}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})},D.call(B.prototype),D.call(N.prototype),N.prototype.clone=function(){return new N(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},N.error=function(){var t=new N(null,{status:0,statusText:""});return t.type="error",t};var R=[301,302,303,307,308];N.redirect=function(t,e){if(-1===R.indexOf(e))throw new RangeError("Invalid status code");return new N(null,{status:e,headers:{location:t}})};var F=g.DOMException;try{new F}catch(t){(F=function(t,e){this.message=t,this.name=e;var i=Error(t);this.stack=i.stack}).prototype=Object.create(Error.prototype),F.prototype.constructor=F}function _(t,e){return new Promise((function(i,n){var s=new B(t,e);if(s.signal&&s.signal.aborted)return n(new F("Aborted","AbortError"));var r=new XMLHttpRequest;function o(){r.abort()}r.onload=function(){var t,e,n={status:r.status,statusText:r.statusText,headers:(t=r.getAllResponseHeaders()||"",e=new x,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var i=t.split(":"),n=i.shift().trim();if(n){var s=i.join(":").trim();e.append(n,s)}})),e)};n.url="responseURL"in r?r.responseURL:n.headers.get("X-Request-URL");var s="response"in r?r.response:r.responseText;setTimeout((function(){i(new N(s,n))}),0)},r.onerror=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},r.ontimeout=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},r.onabort=function(){setTimeout((function(){n(new F("Aborted","AbortError"))}),0)},r.open(s.method,function(t){try{return""===t&&g.location.href?g.location.href:t}catch(e){return t}}(s.url),!0),"include"===s.credentials?r.withCredentials=!0:"omit"===s.credentials&&(r.withCredentials=!1),"responseType"in r&&(y?r.responseType="blob":E&&s.headers.get("Content-Type")&&-1!==s.headers.get("Content-Type").indexOf("application/octet-stream")&&(r.responseType="arraybuffer")),!e||"object"!=typeof e.headers||e.headers instanceof x?s.headers.forEach((function(t,e){r.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){r.setRequestHeader(t,P(e.headers[t]))})),s.signal&&(s.signal.addEventListener("abort",o),r.onreadystatechange=function(){4===r.readyState&&s.signal.removeEventListener("abort",o)}),r.send(void 0===s._bodyInit?null:s._bodyInit)}))}_.polyfill=!0,g.fetch||(g.fetch=_,g.Headers=x,g.Request=B,g.Response=N);i(2),i(3),i(4);class H extends HTMLElement{constructor(){super(),this.componentId,this.componentInitialized=!1,this.data={},this.activePromo=!1,this.updateTermBind=null,this.attributeMap=p.getAttributeMap(),this.config={},this.terms={},this.personalizedTerm={months:0}}static getAttributeMap(){return p.getAttributeMap()}static get observedAttributes(){return Object.keys(this.getAttributeMap())}setData(t){this.data=t,this.updateDOM(t)}setSelectedTerm(t){this.selectedTerm=t}setPromo(t){this.activePromo=t}setConfig(t){this.config=t,this.productName=this.config["product-name"],this.burnRateProductName=this.config["flex-burn-rate-product-name"]||this.productName,this.burnRateString=this.setBurnRateString()}setBurnRateString(){const t=this.config["flex-cost"]||"{0} cost: {1} {2}",e=this.config["flex-token-burn-rate"],i=(t=>parseInt(t,10)>1?this.config["flex-tokens-per-day"]||"tokens/day":this.config["flex-token-per-day"]||"token/day")(e);if(!this.burnRateProductName||!e||this.config.onlyFlex)return null;const n=[this.burnRateProductName,e,i];return p.contentFragmentStringReplacer(t,n)}updateTerm(t){t.detail&&t.detail.id===this.componentId&&(this.setSelectedTerm(t.detail),this.updateDOM(this.data))}getSubscriptionMonths(t){let e=this.data.productLineCode;return adsk&&adsk.api&&adsk.api.configs&&adsk.api.configs.personalizationEngine&&adsk.api.configs.personalizationEngine.maxSubscriptionTermRule?adsk.api.configs.personalizationEngine.maxSubscriptionTermRule(e,t):null}getFilteredTerms(t,e,i){return t.sort((t,e)=>{let i=("MONTH"===t.billingPeriod.toUpperCase()?1:12)*t.billingPeriodCount;return("MONTH"===e.billingPeriod.toUpperCase()?1:12)*e.billingPeriodCount-i}).filter(t=>{let n=("MONTH"===t.billingPeriod?1:12)*t.billingPeriodCount;return("SRPDB"!==i||n!==u.MONTHLY_BASE_DIVISORS[1].MONTH)&&(n>=e&&n!==u.MONTHLY_BASE_DIVISORS[2].YEAR)})}getAbTestQuantities(t){const e=window.sessionStorage.getItem("abtest");if(!e)return t.map(t=>t.toString());const i=JSON.parse(e).find(t=>"smaller-packs"===t.id);return i&&i.variant&&"b"===i.variant?i.packs.map(t=>t.toString()):t.map(t=>t.toString())}getFilteredTermsFlex(t,e){return e=this.getAbTestQuantities(e),t.sort((t,e)=>t.billingQuantity-e.billingQuantity).filter(t=>e.includes(t.billingQuantity))}getPersonalizedSelection(){const t=p.getPurchaseType(this.data);let e=this.getFilteredTerms(t.billingPlans,this.personalizedTerm.months);return{term:e[e.length-1].billingPeriod,count:e[e.length-1].billingPeriodCount}}getPersonalizedTerm(){return this.getSubscriptionMonths("owner")}setPersonalized(){this.personalizedTerm=this.getPersonalizedTerm();let t=this.getPersonalizedSelection();this.terms[t.count+"-"+t.term].selectTerm(t.term,t.count)}unsetPersonalized(){this.personalizedTerm={months:0},this.updateDOM(this.data)}createDOM(){const t=p.createElement("div",{class:"dc-buy-component-terms-container dhig-mb-2",style:"position: relative;"}),e=document.createElement("div"),i=p.createElement("meta",{content:"USD"}),n=p.createElement("link",{href:"https://schema.org/NewCondition"}),s=p.createElement("meta",{content:""}),r=p.createElement("meta",{content:""});p.appendChildren(e,[i,n,s,r]),this.termsOptions=p.createElement("h3",{class:"dhig-typography-headline-smaller dhig-mb-2 dhig-mt-0"}),this.termsSaving=p.createElement("div",{class:"terms-saving dhig-typography-body-copy-small"}),this.newBuyPanelEnabled?this.termsSwitcher=p.createElement("div",{class:"dc-buy-component-terms-switcher dc-buy-component-terms-switcher-no-valid-promotion dhig-flex dhig-flex-wrap md:dhig-flex-nowrap dhig-items-stretch dhig-w-full dhig-pt-3 sm:dhig-flex-col lg:dhig-flex-row dhig-gap-2 dhig-pt-1"}):this.termsSwitcher=p.createElement("div",{class:"dc-buy-component-terms-switcher dc-buy-component-terms-switcher-no-valid-promotion dhig-flex dhig-flex-wrap md:dhig-flex-nowrap dhig-items-stretch dhig-flex-col dhig-w-full dhig-pt-3"}),this.subscriptionPpgEnabled?(this.burnRate=p.createElement("div",{class:"dc-buy-component-burn-rate dhig-typography-body-copy-medium dhig-mt-0 dhig-mb-2 hidden"}),this.burnRateSpan=p.createElement("span",{class:"dhig-typography-headline-smaller"}),this.burnRate.appendChild(this.burnRateSpan),p.appendChildren(t,[e,this.termsOptions,this.termsSaving,this.burnRate,this.termsSwitcher]),this.appendChild(t)):(this.burnRate=p.createElement("div",{class:"dc-buy-component-burn-rate dhig-typography-body-copy-medium dhig-mt-0 hidden"}),p.appendChildren(t,[e,this.termsOptions,this.burnRate,this.termsSwitcher]),this.appendChild(t)),this.updateTermBind=this.updateTerm.bind(this)}getPrice(t){let e,i;return this.subscriptionPpgEnabled?(e=t.amountBeforeDiscountWithVat?t.amountBeforeDiscountWithVat:t.amountBeforeDiscount,i="YEAR"===t.billingPeriod?1:12):(e=p.getAmountBeforeDiscount(t.price),i="YEAR"===t.billingPeriod?12:1),Math.ceil(e/(t.billingPeriodCount*i))}getMonths(t){const e=t.billingPeriod.toUpperCase();return t.billingPeriodCount*("YEAR"===e?12:1)}getBestTerm(t){return t.reduce((t,e)=>this.getPrice(e)<t.price&&this.getMonths(e)<t.months?{price:this.getPrice(e),months:this.getMonths(e),billingPeriod:e.billingPeriod,billingPeriodCount:e.billingPeriodCount}:t,{price:this.getPrice(t[0]),months:this.getMonths(t[0]),billingPeriod:t[0].billingPeriod,billingPeriodCount:t[0].billingPeriodCount})}hasLargePackSizes(){return p.getPurchaseType(this.data).billingPlans.filter(t=>parseInt(t.billingQuantity,10)>1e4).length>0}setupSavings(t){if(this.subscriptionPpgEnabled&&this.newBuyPanelEnabled&&!this.isFlex){const e=t.prices.find(t=>"year"==t.billingPeriod.toLowerCase()&&"1"==t.billingPeriodCount),i=t.prices.find(t=>"year"==t.billingPeriod.toLowerCase()&&"3"==t.billingPeriodCount);let n,s;if(e?n={term:e.billingPeriod.toUpperCase(),count:e.billingPeriodCount,tokenCount:"",priceId:e.priceId}:i&&(n={term:i.billingPeriod.toUpperCase(),count:i.billingPeriodCount,tokenCount:"",priceId:i.priceId}),n&&(s=p.calculateMonthlySavings(n,t.prices,this.isFlex,this.subscriptionPpgEnabled)),s){let e=null,i="",n="";if(this.config[s.termConfigKey]&&s.percentage>0){e=p.formatPercentageByLocale(s.percentage,this.config.locale),i=this.config[s.termConfigKey].replace("{0}",e.toString()),n='<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1wi5lsp dhig-pr-1" focusable="false" aria-hidden="true" viewBox="0 0 24 24" type="default" xmlns="http://www.w3.org/2000/svg"><g id="utility/favorite"><path id="stroke" fill="none" d="M15.2993 8.29405L12.0291 2L8.75867 8.29405H2L6.8853 13.9785L4.68307 21.0672L12.0291 17.2248L19.2472 21.0672L17.045 13.9785L22 8.29405H15.2993Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>';const r=p.hasPromotion(t.prices);this.termsSaving.innerHTML=r?"":n+i}}}}updateDOM(t){let e,i;this.newBuyPanelEnabled&&!this.isFlex&&this.setupSavings(t),i=this.subscriptionPpgEnabled?this.data.prices:p.getPurchaseType(this.data),this.termsOptions.hasChildNodes()||(this.termsOptions.innerHTML=this.config["select-term"],this.config.flex&&this.burnRateString&&(this.burnRate.classList.remove("hidden"),this.burnRate.innerHTML=this.burnRateString)),this.activePromo?this.termsSwitcher.classList.remove("dc-buy-component-terms-switcher-no-valid-promotion"):this.termsSwitcher.classList.add("dc-buy-component-terms-switcher-no-valid-promotion");const n=this.subscriptionPpgEnabled?this.data.prices:i.billingPlans;if(this.config.flex&&"FLEXACCESS"===this.config.plc){const t=this.subscriptionPpgEnabled?this.data.prices:i.billingPlans;e=this.getFilteredTermsFlex(t,u.FLEX_FILTER.defaultQuantities)}else e=this.getFilteredTerms(n,this.personalizedTerm.months,this.data.pricingSource);let s=this.getBestTerm(e);if(this.config.flex&&(e.find(t=>t.billingQuantity===this.selectedTerm.tokenCount)||(this.selectedTerm.tokenCount=e[0].billingQuantity)),e.forEach((i,n)=>{let r,o,a,l=i.billingPeriodCount+"-"+i.billingPeriod,c=i.billingQuantity;o=this.config.flex?this.terms[c]:this.terms[l];let d=i.billingPeriod===s.billingPeriod&&i.billingPeriodCount===s.billingPeriodCount;o?r=this.config.flex?this.terms[c]:this.terms[l]:(r=p.createElement("term-element",{class:"dc-buy-component-term-element","data-buy-component-id":this.componentId,"active-promo":this.activePromo}),p.setSubscriptionPpgEnabledState.call(r,this.subscriptionPpgEnabled),p.setSubscriptionMyabPpgEnabledState.call(r,this.subscriptionMyabPpgEnabled),p.setNewBuyPanelEnabledState.call(r,this.newBuyPanelEnabled),this.config.flex?this.terms[c]=r:this.terms[l]=r),r.setCurrency(t.currency,t.currencyFormat),r.setBestTerm(d),r.setConfig(this.config);const h=p.hasPromotion(t.prices);r.setPromotionValue(h),o||(a=this.config.flex?n<e.length-1?this.terms[e[n+1].billingQuantity]:null:n<e.length-1?this.terms[e[n+1].billingPeriodCount+"-"+e[n+1].billingPeriod]:null,a?this.subscriptionPpgEnabled&&0===Object.keys(this.termsSwitcher).length?this.termsSwitcher.append(r,a):this.termsSwitcher.insertBefore(r,a):this.termsSwitcher.appendChild(r)),this.selectedTerm&&(this.config.flex?r.setIsSelected(i.billingQuantity===this.selectedTerm.tokenCount):r.setIsSelected(i.billingPeriod===this.selectedTerm.term&&i.billingPeriodCount===this.selectedTerm.count)),r.setPlc(this.data.productLineCode),r.setData(i)}),this.subscriptionPpgEnabled?i.filter(t=>!e.includes(t)).map(t=>{let e=this.terms[t.billingPeriodCount+"-"+t.billingPeriod];e&&(this.termsSwitcher.removeChild(e),delete this.terms[t.billingPeriodCount+"-"+t.billingPeriod])}):i.billingPlans.filter(t=>!e.includes(t)).map(t=>{let e=this.terms[t.billingPeriodCount+"-"+t.billingPeriod];e&&(this.termsSwitcher.removeChild(e),delete this.terms[t.billingPeriodCount+"-"+t.billingPeriod])}),this.hasLargePackSizes()&&(this.config.flex||"FLEXACCESS"===this.config.plc)){let t=this.config["flex-large-pack-info"]||"Larger quantities (15,000 - 50,000 tokens) available. {0}",e=this.config["flex-large-pack-link-url"]||"https://www.autodesk.com",i=this.config["flex-large-pack-link-text"]||"Learn more",n=p.createElement("a",{href:e},i).outerHTML;this.largePackElement||(this.largePackElement=p.createElement("div",{class:"dc-buy-component-flex-large-pack-info dhig-typography-body-copy-small dhig-mt-4"}),this.appendChild(this.largePackElement)),this.largePackElement.innerHTML=p.contentFragmentStringReplacer(t,[n])}}attributeChangedCallback(t,e,i){this[this.attributeMap[t]]=i,this.componentInitialized&&this.updateDOM()}connectedCallback(){this.componentId=this.getAttribute("data-buy-component-id"),this.createDOM(),this.addEventListeners()}disconnectedCallback(){this.innerHTML="",this.removeEventListeners()}addEventListeners(){document.addEventListener("selectTerm",this.updateTermBind)}removeEventListeners(){document&&document.removeEventListener("selectTerm",this.updateTermBind)}}window&&window.customElements&&window.customElements.define("terms-container",H);i(5);class U extends HTMLElement{constructor(){super(),this.componentId=null,this.plc=null,this.componentInitialized=!1,this.data={},this.isSelected=!1,this.attributeMap=p.getAttributeMap(),this.config={},this.isBestValue=!1}get observedAttributes(){return Object.keys(this.attributeMap)}setData(t){this.data=t,this.updateDOM(t)}setCurrency(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"USD",e=arguments.length>1?arguments[1]:void 0;this.currency=t,this.currencyFormat=e}setPlc(t){this.plc=t}setIsSelected(t){this.isSelected=t}setTermString(){return this.config.flex?this.data.billingQuantity:this.data.billingPeriodCount+"-"+this.data.billingPeriod}setConfig(t){this.config=t,this.tokenString=this.config["flex-tokens"]||"tokens",this.perTokenString=this.config["flex-per-token"]||"/token"}setBestTerm(t){this.isBestValue=t}updateHistoryTerm(t){let e=window.location.href.split("?");if(1===e.length)return void window.history.pushState(t,null,e[0]+"?term="+this.setTermString());let i=e[1].split("&").map(t=>"term"===t.substr(0,4)?"term="+this.setTermString():t).join("&");window.history.pushState(t,null,e[0]+"?"+i)}selectTermHandler(){this.selectTerm()}selectTerm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s={id:this.componentId,term:t||this.data.billingPeriod,count:e||this.data.billingPeriodCount,tokenCount:i||this.data.billingQuantity,priceId:n||this.data.price.priceId,flex:this.config.flex},r=new CustomEvent("selectTerm",{detail:s});document.dispatchEvent(r),t||this.updateHistoryTerm(s);const o=this.config.originalPlc||this.config.plc;p.saveSelectedTerm(o,s)}createPromoIconInstance(){return p.createElement("img",{src:"https://swc.autodesk.com/pharmacopeia/svg/icons/v0/icons/utility/tag.svg",style:"filter: invert(1); vertical-align: middle",class:"dhig-h-5 dhig-mr-2"})}createDOM(){this.addEventListener("click",this.selectTermHandler.bind(this)),this.newBuyPanelEnabled?this.setAttribute("class","dc-buy-component-ppg-term dc-new-buy-component-ppg-term dhig-flex dhig-flex-nowrap "+(this.config.flex?"dhig-flex-col dhig-justify-start dhig-items-stretch dhig-p-3 dhig-gap-2 flex":"dhig-justify-between dhig-items-center dhig-mb-2 dhig-py-2 dhig-px-4")):this.setAttribute("class","dc-buy-component-ppg-term dhig-flex dhig-flex-nowrap "+(this.config.flex?"dhig-flex-col dhig-justify-start dhig-items-stretch dhig-p-3 dhig-gap-2 flex":"dhig-justify-between dhig-items-center dhig-mb-2 dhig-py-2 dhig-px-4")),this.setAttribute("data-wat-loc","buy panel component"),this.promoIconElement=p.createElement("span",{class:"dc-promo-icon"}),this.priceElement=p.createElement("div",{class:"dhig-typography-body-copy-small",automationId:"dc-buy-component-term-billing-plan-price"}),this.priceElementPrice=p.createElement("span",{class:"dc-price dhig-typography-headline-small dhig-pr-1"}),this.priceElementStrikethroughPrice=p.createElement("span",{class:"dc-strikethrough-price dhig-typography-headline-small dhig-pr-1",style:"vertical-align: middle"}),this.config.flex?(this.termLabel=p.createElement("div",{class:"dc-term-label dhig-typography-smallprint"}),this.tokenElementWrapper=document.createElement("div"),this.tokenElement=document.createElement("div"),this.tokenElementLabel=p.createElement("span",{class:"dc-tokens dhig-typography-smallprint"}),p.appendChildren(this.tokenElement,[this.tokenElementLabel]),this.daysOverOneYearElement=p.createElement("div",{class:"dc-days-over-one-year dhig-typography-smallprint"}),p.appendChildren(this.tokenElementWrapper,[this.tokenElement,this.daysOverOneYearElement]),this.tokenLabel=p.createElement("div",{class:"dc-term"}),p.appendChildren(this.priceElement,[this.priceElementPrice]),p.appendChildren(this,[this.termLabel,this.priceElement,this.tokenElementWrapper])):(this.activePromo=this.getAttribute("active-promo"),this.priceElementTerm=p.createElement("span",{class:"dc-term"}),this.showRenewalInfo=p.createElement("span",{class:"dc-show-renewal-info"}),this.bestTermContainer=p.createElement("div",{class:"dc-best-value dhig-typography-smallprint"}),this.bestTermContent=p.createElement("div",{class:"dc-best-value-contents"}),p.appendChildren(this.bestTermContainer,[this.bestTermContent]),p.appendChildren(this.priceElement,[this.promoIconElement,this.priceElementStrikethroughPrice,this.priceElementPrice,this.priceElementTerm,this.showRenewalInfo]),p.appendChildren(this,[this.priceElement,this.bestTermContainer]))}getTermAnalyticsString(t){return this.config.flex?[this.plc.toLowerCase(),t.billingQuantity,"tokens"].join(":"):[this.plc.toLowerCase(),t.billingPeriodCount,t.billingPeriod.toLowerCase()].join(":")}getPricePerToken(t){let e=p.getAmountUnformatted(t.price)/parseInt(t.billingQuantity,10),i=new Intl.NumberFormat(this.config.locale,{style:"currency",currency:this.currency}).format(e);const n=new RegExp("("+this.currencyFormat.decimal+"(0){2,3})");return i=i.replace(n,""),this.config.locale.match(/-CA$/)&&(i=i.replace(/(^\$)?(\s?[\s0-9.,]*)(\$(\sCA)?)?/,"fr-CA"===this.config.locale?"$2$ CDN":"CDN$1$2")),i}getDaysOverYear(t){if(isNaN(t.billingQuantity))return"";return Math.floor(parseInt(t.billingQuantity,10)/parseInt(this.config["flex-token-burn-rate"],10)).toString()}getTermLabel(t){let e;switch(t.billingQuantity){case this.config["ppg-custom-term-text-varies"]:e=this.config["ppg-custom-term-label"];break;case this.config["ppg-minimum-term-pack-size"]:e=this.config["ppg-minimum-term-label"];break;case this.config["ppg-popular-term-pack-size"]:e=this.config["ppg-popular-term-label"];break;default:e=""}return e}updateDOM(t){if(!t)return;let e,i=isNaN(t.billingQuantity);if(e=this.config.flex?t.billingQuantity:this.config["for-"+t.billingPeriodCount+"-"+t.billingPeriod.toLowerCase()],this.setAttribute("automationId","dc-buy-component-term-billing-plan-".concat(t.billingPeriodCount,"-").concat(t.billingPeriod.toLowerCase())),this.setAttribute("data-wat-val",this.getTermAnalyticsString(t)),this.isSelected?this.classList.add("dc-buy-component-ppg-term-selected"):this.classList.remove("dc-buy-component-ppg-term-selected"),this.config.flex)this.termLabel.innerHTML=this.getTermLabel(t),i?this.tokenElementLabel.innerHTML=this.config["ppg-custom-term-text-estimate-tokens"]:(this.tokenElementLabel.innerHTML=new Intl.NumberFormat(this.config.locale).format(t.billingQuantity)+" "+this.tokenString,this.config.onlyFlex||(this.daysOverOneYearElement.innerHTML=p.contentFragmentStringReplacer(this.config["ppg-term-text-days-over-year"],[this.getDaysOverYear(t)])));else{if("true"===this.config["show-renewal-info"]){let e=t.autoRenewal?this.config["automatic-renewal"]:this.config.renewable;this.showRenewalInfo.innerHTML=" - "+e}else this.showRenewalInfo.innerHTML="";this.isBestValue&&(this.bestTermContent.innerHTML=this.config["best-value"]),this.priceElementTerm.innerHTML=e}this.priceElementPrice.innerHTML=i?this.config["ppg-custom-term-text-varies"]:p.getAmountFormatted(t.price),p.isDiscounted(t.price)?(this.promoIconElement.hasChildNodes()||this.promoIconElement.appendChild(this.createPromoIconInstance()),this.priceElement.classList.add("dc-discount"),this.priceElementStrikethroughPrice.innerHTML=p.getAmountBeforeDiscountFormatted(t.price)):(this.promoIconElement.innerHTML="",this.priceElement.classList.remove("dc-discount"),this.priceElementStrikethroughPrice.innerHTML="")}attributeChangedCallback(t,e,i){this[this.attributeMap[t]]=i,this.componentInitialized&&this.updateDOM()}connectedCallback(){this.componentId=this.getAttribute("data-buy-component-id"),this.createDOM(),window.onpopstate=t=>{t.state&&t.state.term&&this.selectTerm(t.state.term,t.state.count)}}disconnectedCallback(){this.innerHTML=""}}window&&window.customElements&&window.customElements.define("ppg-term-element",U);i(6);class j extends HTMLElement{constructor(){super(),this.componentId,this.componentInitialized=!1,this.data={},this.activePromo=!1,this.updateTermBind=null,this.attributeMap=p.getAttributeMap(),this.config={},this.terms={},this.personalizedTerm={months:0}}static getAttributeMap(){return p.getAttributeMap()}static get observedAttributes(){return Object.keys(this.getAttributeMap())}setData(t){this.data=t,this.updateDOM(t)}setSelectedTerm(t){this.selectedTerm=t}setPromo(t){this.activePromo=t}setConfig(t){this.config=t,this.productName=this.config["product-name"],this.burnRateProductName=this.config["flex-burn-rate-product-name"]||this.productName,this.burnRateString=this.setBurnRateString()}setBurnRateString(){const t=this.config["flex-cost"]||"{0} cost: {1} {2}",e=this.config["flex-token-burn-rate"],i=(t=>parseInt(t,10)>1?this.config["flex-tokens-per-day"]||"tokens/day":this.config["flex-token-per-day"]||"token/day")(e);if(!this.burnRateProductName||!e)return null;const n=[this.burnRateProductName,e,i];return p.contentFragmentStringReplacer(t,n)}updateTerm(t){t.detail&&t.detail.id===this.componentId&&(this.setSelectedTerm(t.detail),this.updateDOM(this.data))}getSubscriptionMonths(t){let e=this.data.productLineCode;return adsk&&adsk.api&&adsk.api.configs&&adsk.api.configs.personalizationEngine&&adsk.api.configs.personalizationEngine.maxSubscriptionTermRule?adsk.api.configs.personalizationEngine.maxSubscriptionTermRule(e,t):null}getFilteredTerms(t,e,i){return t.sort((t,e)=>{let i=("MONTH"===t.billingPeriod.toUpperCase()?1:12)*t.billingPeriodCount;return("MONTH"===e.billingPeriod.toUpperCase()?1:12)*e.billingPeriodCount-i}).filter(t=>{let n=("MONTH"===t.billingPeriod?1:12)*t.billingPeriodCount;return("SRPDB"!==i||n!==u.MONTHLY_BASE_DIVISORS[1].MONTH)&&(n>=e&&n!==u.MONTHLY_BASE_DIVISORS[2].YEAR)})}getAbTestQuantities(t){const e=window.sessionStorage.getItem("abtest");if(!e)return t.map(t=>t.toString());const i=JSON.parse(e).find(t=>"smaller-packs"===t.id);return i&&i.variant&&"b"===i.variant?i.packs.map(t=>t.toString()):t.map(t=>t.toString())}getFilteredTermsFlex(t){let e=this.config["ppg-minimum-term-pack-size"],i=this.config["ppg-popular-term-pack-size"],n=this.config["ppg-custom-term-text-varies"],s=this.getAbTestQuantities([e,i]);return s.push(n),t.sort((t,e)=>t.billingQuantity-e.billingQuantity).filter(t=>s.includes(t.billingQuantity))}getPersonalizedSelection(){const t=p.getPurchaseType(this.data);let e=this.getFilteredTerms(t.billingPlans,this.personalizedTerm.months);return{term:e[e.length-1].billingPeriod,count:e[e.length-1].billingPeriodCount}}getPersonalizedTerm(){return this.getSubscriptionMonths("owner")}setPersonalized(){this.personalizedTerm=this.getPersonalizedTerm();let t=this.getPersonalizedSelection();this.terms[t.count+"-"+t.term].selectTerm(t.term,t.count)}unsetPersonalized(){this.personalizedTerm={months:0},this.updateDOM(this.data)}createDOM(){const t=p.createElement("div",{class:"dc-buy-component-terms-container dhig-mb-2",style:"position: relative;"}),e=document.createElement("div"),i=p.createElement("meta",{content:"USD"}),n=p.createElement("link",{href:"https://schema.org/NewCondition"}),s=p.createElement("meta",{content:""}),r=p.createElement("meta",{content:""});p.appendChildren(e,[i,n,s,r]),this.termsOptions=p.createElement("h3",{class:"dc-buy-component-options-text dhig-typography-headline-smaller dhig-mb-2 dhig-mt-0"}),this.burnRate=p.createElement("div",{class:"dc-buy-component-burn-rate dhig-typography-body-copy-medium dhig-mt-0 dhig-mb-2 hidden"}),this.burnRateSpan=p.createElement("span",{class:"dhig-typography-headline-smaller"}),this.burnRate.appendChild(this.burnRateSpan),this.termsSwitcher=p.createElement("div",{class:"dc-buy-component-terms-switcher dc-buy-component-terms-switcher-no-valid-promotion dhig-flex dhig-flex-wrap md:dhig-flex-nowrap dhig-items-stretch dhig-flex-col dhig-w-full dhig-pt-3"}),p.appendChildren(t,[e,this.termsOptions,this.burnRate,this.termsSwitcher]),this.appendChild(t),this.updateTermBind=this.updateTerm.bind(this)}getPrice(t){const e=p.getAmountBeforeDiscount(t.price),i="YEAR"===t.billingPeriod?12:1;return Math.ceil(e/(t.billingPeriodCount*i))}getMonths(t){const e=t.billingPeriod.toUpperCase();return t.billingPeriodCount*("YEAR"===e?12:1)}getBestTerm(t){return t.reduce((t,e)=>this.getPrice(e)<t.price&&this.getMonths(e)<t.months?{price:this.getPrice(e),months:this.getMonths(e),billingPeriod:e.billingPeriod,billingPeriodCount:e.billingPeriodCount}:t,{price:this.getPrice(t[0]),months:this.getMonths(t[0]),billingPeriod:t[0].billingPeriod,billingPeriodCount:t[0].billingPeriodCount})}hasLargePackSizes(){return p.getPurchaseType(this.data).billingPlans.filter(t=>parseInt(t.billingQuantity,10)>1e4).length>0}updateDOM(t){let e;const i=p.getPurchaseType(this.data);if(this.config.flex){if(this.burnRateString){this.burnRateSpan.innerHTML=this.burnRateString,this.burnRate.classList.remove("hidden");let t={content:this.config["ppg-tooltip-text"],size:"medium",location:"right",arrow:"start",justify:"middle",minScreenWidth:"medium"};this.tooltipIcon=p.createTooltipSvg(t),this.tooltipIcon&&this.burnRate.getElementsByTagName("svg").length<1&&this.burnRate.appendChild(this.tooltipIcon)}this.termsOptions.classList.add("dhig-hidden"),this.termsSwitcher.classList.remove("dhig-flex-col"),this.termsSwitcher.classList.add("sm:dhig-flex-col"),this.termsSwitcher.classList.add("lg:dhig-flex-row"),this.termsSwitcher.classList.add("dhig-gap-2")}else this.termsOptions.hasChildNodes()||(this.termsOptions.innerHTML=this.config["select-term"]);this.activePromo?this.termsSwitcher.classList.remove("dc-buy-component-terms-switcher-no-valid-promotion"):this.termsSwitcher.classList.add("dc-buy-component-terms-switcher-no-valid-promotion"),this.config.flex&&"FLEXACCESS"===this.config.plc?(e=this.getFilteredTermsFlex(i.billingPlans),this.termsSwitcher.classList.add("dhig-mt-6","dhig-pt-1")):e=this.getFilteredTerms(i.billingPlans,this.personalizedTerm.months,t.pricingSource);let n=this.getBestTerm(e);if(this.config.flex&&(e.find(t=>t.billingQuantity===this.selectedTerm.tokenCount)||(this.selectedTerm.tokenCount=e[0].billingQuantity)),e.forEach((i,s)=>{let r,o,a,l=i.billingPeriodCount+"-"+i.billingPeriod,c=i.billingQuantity;o=this.config.flex?this.terms[c]:this.terms[l];let d=i.billingPeriod===n.billingPeriod&&i.billingPeriodCount===n.billingPeriodCount;o?r=this.config.flex?this.terms[c]:this.terms[l]:(r=p.createElement("ppg-term-element",{class:"dc-buy-component-term-element","data-buy-component-id":this.componentId,"active-promo":this.activePromo}),p.setNewBuyPanelEnabledState.call(r,this.newBuyPanelEnabled),this.config.flex?this.terms[c]=r:this.terms[l]=r),r.setCurrency(t.currency,t.currencyFormat),r.setBestTerm(d),r.setConfig(this.config),o||(a=this.config.flex?s<e.length-1?this.terms[e[s+1].billingQuantity]:null:s<e.length-1?this.terms[e[s+1].billingPeriodCount+"-"+e[s+1].billingPeriod]:null,a?this.termsSwitcher.insertBefore(r,a):this.termsSwitcher.appendChild(r)),this.selectedTerm&&(this.config.flex?r.setIsSelected(i.billingQuantity===this.selectedTerm.tokenCount):r.setIsSelected(i.billingPeriod===this.selectedTerm.term&&i.billingPeriodCount===this.selectedTerm.count)),r.setPlc(this.data.productLineCode),r.setData(i)}),i.billingPlans.filter(t=>!e.includes(t)).map(t=>{let e=this.terms[t.billingPeriodCount+"-"+t.billingPeriod];e&&(this.termsSwitcher.removeChild(e),delete this.terms[t.billingPeriodCount+"-"+t.billingPeriod])}),this.hasLargePackSizes()&&(this.config.flex||"FLEXACCESS"===this.config.plc)){let t=this.config["flex-large-pack-info"]||"Larger quantities (15,000 - 50,000 tokens) available. {0}",e=this.config["flex-large-pack-link-url"]||"https://www.autodesk.com",i=this.config["flex-large-pack-link-text"]||"Learn more",n=p.createElement("a",{href:e},i).outerHTML;this.largePackElement||(this.largePackElement=p.createElement("div",{class:"dc-buy-component-flex-large-pack-info dhig-typography-body-copy-small dhig-mt-4"}),this.appendChild(this.largePackElement)),this.largePackElement.innerHTML=p.contentFragmentStringReplacer(t,[n])}}attributeChangedCallback(t,e,i){this[this.attributeMap[t]]=i,this.componentInitialized&&this.updateDOM()}connectedCallback(){this.componentId=this.getAttribute("data-buy-component-id"),this.createDOM(),this.addEventListeners()}disconnectedCallback(){this.innerHTML="",this.removeEventListeners()}addEventListeners(){document.addEventListener("selectTerm",this.updateTermBind)}removeEventListeners(){document&&document.removeEventListener("selectTerm",this.updateTermBind)}}window&&window.customElements&&window.customElements.define("ppg-terms-container",j);i(7);class z extends HTMLElement{constructor(){super(),this.componentId=null,this.plc=null,this.componentInitialized=!1,this.data={},this.isSelected=!1,this.attributeMap=p.getAttributeMap(),this.config={},this.isBestValue=!1,this.isPromotionValue=!1}get observedAttributes(){return Object.keys(this.attributeMap)}setData(t){this.data=t,this.updateDOM(t)}setCurrency(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"USD",e=arguments.length>1?arguments[1]:void 0;this.currency=t,this.currencyFormat=e}setPlc(t){this.plc=t}setIsSelected(t){this.isSelected=t}setTermString(){return this.config.flex||this.subscriptionPpgEnabled?this.data.billingQuantity:this.data.billingPeriodCount+"-"+this.data.billingPeriod}setConfig(t){this.config=t,this.tokenString=this.config["flex-tokens"]||"tokens",this.perTokenString=this.config["flex-per-token"]||"/token"}setBestTerm(t){this.isBestValue=t}setPromotionValue(t){this.isPromotionValue=t}updateHistoryTerm(t){let e=window.location.href.split("?");if(1===e.length)return void window.history.pushState(t,null,e[0]+"?term="+this.setTermString());let i=e[1].split("&").map(t=>"term"===t.substr(0,4)?"term="+this.setTermString():t).join("&");window.history.pushState(t,null,e[0]+"?"+i)}selectTermHandler(){this.selectTerm()}selectTerm(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r={id:this.componentId,term:e||this.data.billingPeriod,count:i||this.data.billingPeriodCount,tokenCount:n||this.data.billingQuantity,priceId:s||(null===(t=this.data.price)||void 0===t?void 0:t.priceId)||this.data.priceId,flex:this.config.flex},o=new CustomEvent("selectTerm",{detail:r});document.dispatchEvent(o),e||this.updateHistoryTerm(r);const a=this.config.originalPlc||this.config.plc;p.saveSelectedTerm(a,r)}createPromoIconInstance(){return p.createElement("img",{src:"https://swc.autodesk.com/pharmacopeia/svg/icons/v0/icons/utility/tag.svg",style:"filter: invert(1); vertical-align: middle",class:"dhig-h-5 dhig-mr-1"})}createDOM(){this.addEventListener("click",this.selectTermHandler.bind(this)),this.newBuyPanelEnabled?this.setAttribute("class","dc-new-buy-component-term dhig-flex dhig-flex-nowrap dhig-flex-col dhig-items-stretch dhig-p-3 dhig-gap-2 flex"):this.setAttribute("class","dc-buy-component-term dhig-flex dhig-flex-nowrap dhig-justify-between dhig-items-center dhig-mb-2 dhig-py-2 dhig-px-4"+(this.config.flex?" flex":"")),this.setAttribute("data-wat-loc","buy panel component"),this.promoIconElement=p.createElement("span",{class:"dc-promo-icon"}),this.priceElement=p.createElement("div",{class:"dhig-typography-body-copy-small",automationId:"dc-buy-component-term-billing-plan-price"}),this.priceElementPrice=p.createElement("span",{class:"dc-price dhig-typography-headline-small dhig-pr-1"}),this.priceElementStrikethroughPrice=p.createElement("span",{class:"dc-strikethrough-price dhig-typography-headline-smaller dhig-pr-1",style:"vertical-align: middle"}),this.config.flex?(this.tokenElementWrapper=document.createElement("div"),this.tokenElement=document.createElement("div"),this.tokenElementTokens=p.createElement("span",{class:"dc-tokens dhig-typography-headline-small dhig-pr-1"}),this.tokenElementLabel=p.createElement("span",{class:"dc-term dhig-typography-body-copy-medium"},this.tokenString),this.pricePerTokenElement=p.createElement("div",{class:"dc-price-per-token dhig-typography-smallprint"}),p.appendChildren(this.tokenElement,[this.tokenElementTokens,this.tokenElementLabel]),p.appendChildren(this.tokenElementWrapper,[this.tokenElement,this.pricePerTokenElement]),this.tokenLabel=p.createElement("div",{class:"dc-term"}),p.appendChildren(this.priceElement,[this.promoIconElement,this.priceElementStrikethroughPrice,this.priceElementPrice]),p.appendChildren(this,[this.tokenElementWrapper,this.priceElement])):this.newBuyPanelEnabled?(this.priceElementTerm=p.createElement("span",{class:"dc-term dhig-typography-smallprint"}),this.termLabel=document.createElement("div",{class:"dc-term-label dhig-typography-smallprint"}),p.appendChildren(this.termLabel,[this.priceElementTerm]),this.showRenewalInfo=p.createElement("span",{class:"dc-show-renewal-info"}),this.bestTermContainer=p.createElement("div",{class:"dc-best-value dhig-typography-smallprint"}),this.bestTermContent=p.createElement("div",{class:"dc-best-value-contents"}),this.starDiv=p.createElement("div",{class:"dc-star-div dhig-mt-auto"}),this.priceElementStrikethroughPriceWrapper=document.createElement("div"),p.appendChildren(this.priceElementStrikethroughPriceWrapper,[this.priceElementStrikethroughPrice]),p.appendChildren(this.priceElement,[this.promoIconElement,this.priceElementPrice,this.priceElementStrikethroughPriceWrapper,this.showRenewalInfo]),p.appendChildren(this,[this.termLabel,this.priceElement,this.starDiv])):(this.activePromo=this.getAttribute("active-promo"),this.priceElementTerm=p.createElement("span",{class:"dc-term"}),this.showRenewalInfo=p.createElement("span",{class:"dc-show-renewal-info"}),this.bestTermContainer=p.createElement("div",{class:"dc-best-value dhig-typography-smallprint"}),this.bestTermContent=p.createElement("div",{class:"dc-best-value-contents"}),this.payAnnually=p.createElement("div",{class:"dc-pay-annually"}),p.appendChildren(this.priceElement,[this.promoIconElement,this.priceElementStrikethroughPrice,this.priceElementPrice,this.priceElementTerm,this.showRenewalInfo]),p.appendChildren(this,[this.priceElement,this.bestTermContainer,this.payAnnually]))}getTermAnalyticsString(t){return this.config.flex?[this.plc.toLowerCase(),t.billingQuantity,"tokens"].join(":"):[this.plc.toLowerCase(),t.billingPeriodCount,t.billingPeriod.toLowerCase()].join(":")}getPricePerToken(t){let e=this.subscriptionPpgEnabled?t.amount:p.getAmountUnformatted(t.price)/parseInt(t.billingQuantity,10),i=new Intl.NumberFormat(this.config.locale,{style:"currency",currency:this.currency}).format(e);const n=new RegExp("("+this.currencyFormat.decimal+"(0){2,3})");return i=i.replace(n,""),this.config.locale.match(/-CA$/)&&(i=i.replace(/(^\$)?(\s?[\s0-9.,]*)(\$(\sCA)?)?/,"fr-CA"===this.config.locale?"$2$ CDN":"CDN$1$2")),i}updateDOM(t){if(!t)return;let e;var i;this.subscriptionPpgEnabled&&this.subscriptionMyabPpgEnabled&&"year"===t.billingPeriod.toLowerCase()&&t.billingPeriodCount>1&&!this.newBuyPanelEnabled&&(this.payAnnually.innerHTML=null===(i=this.config["myab-pay-annually"])||void 0===i?void 0:i.toUpperCase());if(this.newBuyPanelEnabled&&"year"==t.billingPeriod.toLowerCase()&&!this.config.flex){const e=this.subscriptionMyabPpgEnabled?this.config["myab-pay-annually"]:this.config["lock-in-your-price"],i=t.billingPeriodCount>1?e:this.config["most-popular"];let n="";this.isPromotionValue||(n='<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1wi5lsp" focusable="false" aria-hidden="true" viewBox="0 0 24 24" type="default" xmlns="http://www.w3.org/2000/svg"><g id="utility/favorite"><path id="stroke" fill="none" d="M15.2993 8.29405L12.0291 2L8.75867 8.29405H2L6.8853 13.9785L4.68307 21.0672L12.0291 17.2248L19.2472 21.0672L17.045 13.9785L22 8.29405H15.2993Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>'),this.starDiv.classList.add("dhig-typography-smallprint"),this.starDiv.innerHTML="<span>"+i+"</span> "+n}if(this.newBuyPanelEnabled&&!this.config.flex){let i;i="month"==t.billingPeriod.toLowerCase()?this.config["month-period"]:"year"==t.billingPeriod.toLowerCase()&&"1"==t.billingPeriodCount?this.config["year-period"]:this.config["years-period"],e=t.billingPeriodCount+" "+i,this.priceElementTerm.classList.add("dhig-typography-smallprint")}else e=this.config.flex?t.billingQuantity:this.config["for-"+t.billingPeriodCount+"-"+t.billingPeriod.toLowerCase()];if(this.setAttribute("automationId","dc-buy-component-term-billing-plan-".concat(t.billingPeriodCount,"-").concat(t.billingPeriod.toLowerCase())),this.setAttribute("data-wat-val",this.getTermAnalyticsString(t)),this.isSelected?this.classList.add("dc-buy-component-term-selected"):this.classList.remove("dc-buy-component-term-selected"),this.config.flex)this.tokenElementTokens.innerHTML=new Intl.NumberFormat(this.config.locale).format(t.billingQuantity),this.pricePerTokenElement.innerHTML=this.getPricePerToken(t)+this.perTokenString;else{if("true"===this.config["show-renewal-info"]){let e=t.autoRenewal?this.config["automatic-renewal"]:this.config.renewable;this.showRenewalInfo.innerHTML=" - "+e}else this.showRenewalInfo.innerHTML="";this.isBestValue&&(this.bestTermContent.innerHTML=this.config["best-value"]),this.priceElementTerm.innerHTML=e}this.priceElementPrice.innerHTML=this.subscriptionPpgEnabled?p.getAmountFormatted(t):p.getAmountFormatted(t.price);let n=this.subscriptionPpgEnabled?t:t.price;p.isDiscounted(n)?(this.promoIconElement.hasChildNodes()||(this.newBuyPanelEnabled?this.promoIconElement.innerHTML='<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1wi5lsp" focusable="false" aria-hidden="true" viewBox="0 0 24 24" type="default" fill="#ffffff" xmlns="http://www.w3.org/2000/svg"><g id="utility/tag-solid"><path id="fill" fill-rule="evenodd" clip-rule="evenodd" d="M2.7 2H11.7672C11.9528 2 12.1309 2.07375 12.2622 2.20503L23.505 13.4479C23.7784 13.7212 23.7784 14.1645 23.505 14.4378L14.4378 23.505C14.1645 23.7784 13.7212 23.7784 13.4479 23.505L2.20502 12.2622C2.07375 12.1309 2 11.9528 2 11.7672V2.7C2 2.3134 2.3134 2 2.7 2ZM8 6.25C7.0335 6.25 6.25 7.0335 6.25 8C6.25 8.9665 7.0335 9.75 8 9.75C8.9665 9.75 9.75 8.9665 9.75 8C9.75 7.0335 8.9665 6.25 8 6.25Z" fill="currentColor"></path></g></svg>':this.promoIconElement.appendChild(this.createPromoIconInstance())),this.priceElement.classList.add("dc-discount"),this.priceElementStrikethroughPrice.innerHTML=p.getAmountBeforeDiscountFormatted(n)):(this.promoIconElement.innerHTML="",this.priceElement.classList.remove("dc-discount"),this.priceElementStrikethroughPrice.innerHTML="")}attributeChangedCallback(t,e,i){this[this.attributeMap[t]]=i,this.componentInitialized&&this.updateDOM()}connectedCallback(){this.componentId=this.getAttribute("data-buy-component-id"),this.createDOM(),window.onpopstate=t=>{t.state&&t.state.term&&this.selectTerm(t.state.term,t.state.count)}}disconnectedCallback(){this.innerHTML=""}}window&&window.customElements&&window.customElements.define("term-element",z);i(8);class Q extends HTMLElement{constructor(){super(),this.componentId,this.componentInitialized=!1,this.data={},this.promoApplied=!1,this.selectedTerm={},this.config={},this.updateTermBind=null,this.initialized=!1,this.attributeMap=p.getAttributeMap()}setData(t){this.data=t,this.updateDOM(t)}setConfig(t){this.config=t}setPromoApplied(t){this.promoApplied=t}setSelectedTerm(t){this.selectedTerm=t}getIsDiscounted(t){try{let e;return e=t.find(t=>t.billingPeriod===this.selectedTerm.term&&t.billingPeriodCount===this.selectedTerm.count),p.isDiscounted(e)||this.promoApplied}catch(t){return console.error("error determining discounted state",t),!1}}shouldHideSavingsText(t){const e=this.selectedTerm.term.toUpperCase();return p.isMonthlyTermAvailable(t)&&"1"===this.selectedTerm.count&&"MONTH"===e||!p.isMonthlyTermAvailable(t)&&"1"===this.selectedTerm.count&&"YEAR"===e||this.getIsDiscounted(t)}updateQuantityHandler(t){if(!this.initialized)return;let e={quantity:t.target.value},i=new CustomEvent("updateQuantity",{detail:e});document.dispatchEvent(i)}updatePriceAndSavings(t){const e=t.detail;this.setSelectedTerm(e),e.id===this.componentId&&this.updateDOM(this.data)}updateHistoryTerm(t){let e=window.location.href.split("?");if(1===e.length)return;let i=e[1].split("&").map(t=>"quantity"===t.substr(0,4)?"quantity="+this.setTermString():t).join("&");window.history.pushState({quantity:t},null,e[0]+"?"+i)}createPromoIconInstance(){return p.createElement("img",{src:"https://swc.autodesk.com/pharmacopeia/svg/icons/v0/icons/utility/tag.svg",style:"filter: invert(1);",class:"dhig-h-6 dhig-mr-2"})}getTermText(){if(!this.selectedTerm||!this.data||!this.config)return"";const{term:t,count:e}=this.selectedTerm;return this.subscriptionPpgEnabled&&this.subscriptionMyabPpgEnabled&&"year"===this.selectedTerm.term.toLowerCase()&&"3"===this.selectedTerm.count?this.config["myab-3-year-for-1-user"]:"MONTH"===t?this.config["per-month-for-1-user"]||"/month for 1 user":"YEAR"===t&&"1"===e?this.config["per-year-for-1-user"]||"/per year for 1 user":this.config["per-3-year-for-1-user"]||"/per 3 year for 1 user"}createDOM(){const t=p.createElement("div",{class:"dc-buy-component-summary-drawer dhig-mb-4"}),e=p.createElement("div",{}),i=p.createElement("div",{class:"dc-quantity"}),n=p.createElement("div",{},"Quantity");this.quantityInput=p.createElement("input",{type:"number",min:"1",max:"999","data-automation-id":"buy-component-quantity-selector",class:"dc-buy-component-qty-input",default:"",value:"1"}),this.quantityInput.addEventListener("change",this.updateQuantityHandler.bind(this)),p.appendChildren(i,[n,this.quantityInput]);const s=p.createElement("div",{});this.totalElement=p.createElement("div",{class:"dc-buy-component-summary-drawer-total-price dhig-m-0","data-automation-id":"buy-component-summary-drawer-term-pricing"}),this.promoIconElement=p.createElement("span",{class:"dc-promo-icon"}),this.totalStrikeThroughPriceElement=p.createElement("span",{class:"dc-strikethrough-price dhig-typography-headline-smaller dhig-mx-2"},""),this.totalPriceElement=p.createElement("span",{class:"dc-price dhig-typography-headline-large"},""),this.totalSelectedTermElement=p.createElement("span",{class:"dc-term dhig-typography-headline-smaller"},""),this.taxInformation=p.createElement("span",{class:"dc-tax-text dhig-typography-body-copy-small dhig-ml-1"},""),this.promoHeader=p.createElement("div",{class:"dhig-typography-headline-smaller","data-automation-id":"buy-component-summary-drawer-promo-headline"},"Promo text goes here"),this.savingsDiv=p.createElement("div",{class:"dc-savings-text dhig-typography-body-copy-small"},""),p.appendChildren(this.totalElement,[this.promoIconElement,this.totalPriceElement,this.totalStrikeThroughPriceElement,this.totalSelectedTermElement,this.taxInformation]),p.appendChildren(s,[this.totalElement,this.promoHeader,this.savingsDiv]),p.appendChildren(e,[i,s]),p.appendChildren(t,[e]),this.appendChild(t)}updateDOM(t){var e;let i,n={};this.subscriptionPpgEnabled?n.billingPlans=t.prices:n=p.getPurchaseType(t);let s=p.getBillingPlanByTerm(this.selectedTerm,n.billingPlans,this.config.flex);const r=this.ppgEnabled&&s.billingQuantity&&isNaN(s.billingQuantity),o=this.subscriptionPpgEnabled?s:s.price,a=p.getAmountBeforeDiscount(o);i=r?s.billingQuantity:this.subscriptionPpgEnabled&&"Varies"===this.selectedTerm.tokenCount?this.selectedTerm.tokenCount:p.getAmountFormatted(o);const l=this.getTermText();if(p.isFalsy(this.config["display-saving"])||this.config.flex||this.shouldHideSavingsText(n.billingPlans,this.selectedTerm)||this.newBuyPanelEnabled)this.savingsDiv.classList.add("dc-no-display");else{let t=p.calculateMonthlySavings(this.selectedTerm,n.billingPlans,this.config.flex,this.subscriptionPpgEnabled);if(t){let e=null,i="";this.config[t.termConfigKey]&&t.percentage>0&&(e=p.formatPercentageByLocale(t.percentage,this.config.locale),i=this.config[t.termConfigKey].replace("{0}",e.toString())),this.savingsDiv.textContent=i,this.savingsDiv.classList.remove("dc-no-display")}}if(this.totalPrice=document.querySelector(".dc-buy-component-summary-drawer-total-price"),this.newBuyPanelEnabled&&(null===(e=t.prices)||void 0===e?void 0:e.length)<=1&&"FLEXACCESS"!=t.productLineCode?this.totalPrice.classList.add("no-margin"):this.totalPrice.classList.remove("no-margin"),p.isDiscounted(o)){if(!this.promoIconElement.hasChildNodes()){let t=this.createPromoIconInstance();this.newBuyPanelEnabled?(this.promoIconElement.classList.remove("dc-promo-icon"),this.promoIconElement.classList.add("dc-summary-drawer-new-promo-icon"),this.promoIconElement.innerHTML='<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1wi5lsp" focusable="false" aria-hidden="true" viewBox="0 0 24 24" type="default" fill="#ffffff" xmlns="http://www.w3.org/2000/svg"><g id="utility/tag-solid"><path id="fill" fill-rule="evenodd" clip-rule="evenodd" d="M2.7 2H11.7672C11.9528 2 12.1309 2.07375 12.2622 2.20503L23.505 13.4479C23.7784 13.7212 23.7784 14.1645 23.505 14.4378L14.4378 23.505C14.1645 23.7784 13.7212 23.7784 13.4479 23.505L2.20502 12.2622C2.07375 12.1309 2 11.9528 2 11.7672V2.7C2 2.3134 2.3134 2 2.7 2ZM8 6.25C7.0335 6.25 6.25 7.0335 6.25 8C6.25 8.9665 7.0335 9.75 8 9.75C8.9665 9.75 9.75 8.9665 9.75 8C9.75 7.0335 8.9665 6.25 8 6.25Z" fill="currentColor"></path></g></svg>'):this.promoIconElement.appendChild(t)}this.totalElement.classList.add("dc-discount"),this.totalStrikeThroughPriceElement.classList.remove("dc-no-display"),this.totalStrikeThroughPriceElement.innerHTML=p.getFormattedPrice(t.currencyFormat,parseFloat(a)),this.totalPriceElement.innerHTML=i}else this.totalElement.classList.remove("dc-discount"),this.totalStrikeThroughPriceElement.classList.add("dc-no-display"),this.totalStrikeThroughPriceElement.innerHTML="",this.promoIconElement.innerHTML="",this.totalPriceElement.innerHTML=i;if(r||p.isEmptyString(this.config["tax-information"])?this.taxInformation.classList.add("dc-no-display"):(this.taxInformation.innerHTML="(".concat(this.config["tax-information"],")"),this.taxInformation.classList.remove("dc-no-display")),this.config.flex||(this.totalSelectedTermElement.innerHTML=l),this.updatePromoDom(s.promotion),!this.initialized){let t=this.data.quantity;this.quantityInput.value=parseInt(t,10),this.initialized=!0}}updatePromoDom(t){this.promoHeader.innerHTML="","object"==typeof t&&t.hasOwnProperty("promoHeadline")&&(this.promoHeader.innerHTML=t.hasOwnProperty("promoSubHeadline")?t.promoHeadline+" "+t.promoSubHeadline:t.promoHeadline)}connectedCallback(){this.componentId=this.getAttribute("data-buy-component-id"),this.createDOM(),this.updatePriceAndSavingsBind=this.updatePriceAndSavings.bind(this),this.addEventListeners()}disconnectedCallback(){this.innerHTML="",this.removeEventListeners()}addEventListeners(){document.addEventListener("selectTerm",this.updatePriceAndSavingsBind)}removeEventListeners(){document&&document.removeEventListener("selectTerm",this.updatePriceAndSavingsBind)}}window&&window.customElements&&window.customElements.define("summary-drawer",Q);i(9);class Y extends HTMLElement{constructor(){super(),this.numbers={},this.flexNumbers={},this.contactText="",this.flexContactText="",this.plc="",this.url="",this.locale=[],this.alternateCtaButtonState=!1}static get DEFAULTS(){return{localeSize:2,flexPlc:"FLEXACCESS",trueStr:"true"}}hasPhones(){let t=!1;const e=this.getNumbersByPlc();try{if(e&&e.phoneNumbers&&e.phoneNumbers.productNumbers){const i=Object.keys(e.phoneNumbers.productNumbers);let n=0;for(;!t&&n<i.length;)t=e.phoneNumbers.productNumbers[i[n]].trim().length>0,n++}}catch(t){console.error("ContactNumbers.hasPhones:",t)}return t}hasPhoneStr(){const t=this.getContactTextByPlc();return!!t&&t.trim().length>0&&!!t.match(/{\d}/gim)}isNumberAllowed(){return!this.isFlex()||!this.alternateCtaButtonState}isFlex(){return this.plc===Y.DEFAULTS.flexPlc}hasMultipleTokens(t){return t.match(/{\d}/g).length>1}setNumbers(t){try{this.numbers=JSON.parse(t)}catch(t){console.error("ContactNumbers.setNumbers:",t)}}setFlexNumbers(t){try{this.flexNumbers=JSON.parse(t)}catch(t){console.error("ContactNumbers.setFlexNumbers:",t)}}setNumbersByPlc(t){this.isFlex()?this.flexNumbers=t:this.numbers=t}setContactText(t){this.contactText=t}setFlexContactText(t){this.flexContactText=t}setContactTextByPlc(t){this.isFlex()?this.flexContactText=t:this.contactText=t}setPLC(t){this.plc=t}setLocale(t){try{this.locale=t.split("-"),this.locale.length<Y.DEFAULTS.localeSize&&(this.locale=document.documentElement.lang.split("-")),this.locale.length<Y.DEFAULTS.localeSize&&console.error("ContactNumbers.setLocale: invalid locale")}catch(t){console.error("ContactNumbers.setLocale:",t)}}setURL(t){this.url=t}setAlternateCtaButtonState(t){this.alternateCtaButtonState="string"==typeof t&&t===Y.DEFAULTS.trueStr}getContactTextByPlc(){return this.isFlex()?this.flexContactText:this.contactText}getNumbersByPlc(){return this.isFlex()?this.flexNumbers:this.numbers}getContactNumberURL(){return this.url+this.locale[1]+"?plc="+this.plc+"&languageCode="+this.locale[0]}getNumberHref(t){return"tel:"+t.replace(/[^\d]/gim,"")}removeExcessiveMacros(){try{let t=0,e=this.getContactTextByPlc(),i=e.match(/{\d}/gim).length,n=this.getNumbersByPlc();Object.keys(n.phoneNumbers.productNumbers).forEach(e=>{n.phoneNumbers.productNumbers[e].trim().length>0&&t++}),i>t?(e=e.slice(0,e.indexOf(e.match(/{\d}/gim).reverse()[i-t-1])),this.setContactTextByPlc(e),console.error("ContactNumbers: there are more macros than phones")):t<i&&console.error("ContactNumbers: there are more phones than macros")}catch(t){console.error("ContactNumbers.removeExcessiveMacros:",t)}}createDOM(){try{this.hasPhoneStr()&&this.isNumberAllowed()?this.performFetch().then(()=>{if(this.hasPhones()){const t=this.hasMultipleTokens(this.getContactTextByPlc());this.removeExcessiveMacros(),this.setNumbersDOM(t);const e=p.createElement("img",{src:"https://swc.autodesk.com/pharmacopeia/svg/icons/v0/icons/actions/support.svg",style:"filter: invert(1);",class:"dhig-h-5 dhig-mr-1"}),i=t?this.getNumberDivDOM():this.getNumberLinkDOM();let n=p.createElement("span",{},this.getContactTextByPlc());p.appendChildren(i,[e,n]),this.appendChild(i)}else console.warn("ContactNumbers: No phones numbers")}).catch(t=>console.error("ContactNumbers.createDOM",t)):console.warn("ContactNumbers: No phones data")}catch(t){console.error("ContactNumbers.createDOM:",t)}}setNumbersDOM(t){try{let e=this.getNumbersByPlc();const i=e.phoneNumbers.productNumbers,n=e.phoneNumbers.plc;Object.keys(i).forEach((e,s)=>{const r=new RegExp("\\{\\s*"+s+"\\s*\\}","gmi"),o=i[e].trim();if(o.length>0){const e=t?this.getPhoneLinkDOM(o,n):this.getNumberDOM(o,n);let i=this.getContactTextByPlc();i=i.replace(r,e.outerHTML),this.setContactTextByPlc(i)}})}catch(t){console.error("ContactNumbers.setNumbersDOM:",t)}}getNumberLinkDOM(){const t=document.createElement("a"),e=Object.values(this.getNumbersByPlc().phoneNumbers.productNumbers)[0];return t.setAttribute("href",this.getNumberHref(e)),t.setAttribute("class","MuiLink-root MuiLink-underlineNone dhig-typography-body-copy-small dhig-mt-3 dhig-flex dhig-gap-1"),t.setAttribute("rel","nofollow"),t.setAttribute("data-wat-link","true"),t.setAttribute("data-wat-loc","content"),t.setAttribute("data-wat-val","talk to our sales team"),t.setAttribute("id","contact-numbers"),t}getNumberDivDOM(){const t=document.createElement("div");return t.setAttribute("class","dhig-typography-body-copy-small dhig-mt-3 dhig-flex dhig-gap-1"),t.setAttribute("rel","nofollow"),t.setAttribute("id","contact-numbers"),t}getNumberDOM(t,e){let i=document.createElement("span");return i.setAttribute("data-phone-target","PHONE"),i.setAttribute("data-phone-plc",e),i.innerText=t,i}getPhoneLinkDOM(t,e){let i=document.createElement("a");return i.setAttribute("data-phone-target","PHONE"),i.setAttribute("data-phone-plc",e),i.setAttribute("href",this.getNumberHref(t)),i.setAttribute("class","MuiLink-root MuiLink-underlineNone"),i.setAttribute("data-wat-link","true"),i.setAttribute("data-wat-loc","content"),i.setAttribute("data-wat-val","talk to our sales team"),i.innerText=t,i}performFetch(){try{if(this.hasPhones())return Promise.resolve(!0);if(this.url){const t=this.getContactNumberURL();return fetch(t,{method:"GET",mode:"cors",credentials:"same-origin",cache:"default"}).then(t=>{const e=t.json();if(t.status>=200&&t.status<300)return e;throw new Error("status: "+t.status)}).then(t=>(this.setNumbersByPlc(t),Promise.resolve(t))).catch(t=>(console.error("ContactNumbers.performFetch.fetch.catch:",t),Promise.reject("failed requests")))}return Promise.reject("invalid data")}catch(t){return console.error("ContactNumbers.performFetch.catch:",t),Promise.reject("failed fetch")}}connectedCallback(){this.createDOM()}}window&&window.customElements&&window.customElements.define("contact-numbers",Y);var V=i(0),q=i.n(V);var G={PRICING_SOURCE:{SRPDB:"SRPDB",PELICAN:"PELICAN",DR:"DR"},MONTHLY_BASE_DIVISORS:{1:{YEAR:12,MONTH:1},2:{YEAR:24},3:{YEAR:36}},ANNUAL_BASE_DIVISORS:{1:{YEAR:1},2:{YEAR:2},3:{YEAR:3}},PRICING_COMPARISON_TERMS:{ANNUAL:{term:"YEAR",count:"1"},MONTHLY:{term:"MONTH",count:"1"}},CURRENCY:{separator:"|",defaultHeader:"moneda",flagsPath:"/content/dam/flags/",localStorageKey:"currencyCode",eventUpdate:"updateCurrency"},CURRENCY_SELECTOR_FLAGS_SVG_SHARED_PROPS:{WRAPPER:{height:"0",width:"0",style:"position:absolute"},viewBox:"0 0 640 480"},LATAM_CURRENCY_CODES:{US:"icon-flag-us",CO:"icon-flag-co",CL:"icon-flag-cl",AR:"icon-flag-ar"},CTA_CONFIG:{flex:{wrapper:{styles:"dc-buy-component-flex-buttons-wrapper dhig-flex dhig-flex-col lg:dhig-flex-row dhig-gap-2"},primary:{styles:"MuiButtonBase-root MuiButton-root MuiButton-contained dhig-w-full md:dhig-w-auto",analytics:{"data-wat-content-name":"fsbf","data-wat-content-type":"waf-flex","data-wat-product-line-code":"FLEXACCESS","data-wat-configurator-link-type":"add-to-cart-flex","data-wat-configurator-quantity":"1","data-wat-configurator-support-level":"advanced"}},secondary:{styles:"MuiButtonBase-root MuiButton-root MuiButton-outlined dhig-w-full md:dhig-w-auto",analytics:{"data-wat-flex-estimator":"true"}},btnElementNames:["ctaPrimaryButton","ctaSecondaryButton"]},buy:{primary:{styles:"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-fullWidth dhig-w-full md:dhig-w-auto dhig-justify-between",analytics:{"data-automation-id":"buy-component-call-to-action","data-wat-content-name":"fsb","data-wat-content-type":"waf-buy","data-wat-product-line-code":"ACDIST","data-wat-configurator-link-type":"add to cart","data-wat-configurator-term":"1-YEAR","data-wat-configurator-pid":"24040","data-wat-configurator-quantity":"1","data-wat-configurator-support-level":"ADVANCED"},iconStyles:"dhig-h-5"},reseller:{styles:"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-fullWidth dhig-w-full md:dhig-w-auto dhig-justify-between",analytics:{"data-automation-id":"buy-component-call-to-action","data-wat-content-name":"fsb","data-wat-content-type":"waf-buy","data-wat-configurator-link-type":"find a reseller"},iconStyles:"dhig-h-5"}},buttonContainer:{styles:"dc-buy-component-cta"},buttonText:{primary:{styles:"MuiButton-label dhig-flex dhig-gap-2"},reseller:{styles:"MuiButton-label dhig-flex dhig-gap-2"},secondary:{styles:"MuiButton-label"}},guaranteeText:{styles:"dc-buy-component-call-to-action-guarantee dhig-typography-smallprint dhig-mt-3 dhig-mb-2",analytics:{"data-automation-id":"buy-component-money-back-guarantee"}}},FLEX_FILTER:{minFlexQuantity:500,maxFlexQuantity:1e4,defaultQuantities:[500,1e3,5e3,1e4]}};i(10);function W(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function X(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?W(Object(i),!0).forEach((function(e){q()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):W(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}class J extends HTMLElement{constructor(){var t;super(),this.componentId,this.componentInitialized=!1,this.data={},this.config={},this.initialized=!1,this.handlersInitialized=!1,this.attributeMap=p.getAttributeMap(),this.billingPeriod,this.billingPeriodCount,this.billingQuantity,this.billingPriceId,this.domCreated=!1,this.isReseller=!1,this.isEnableMiniCart="true"===document.querySelector("buy-component").getAttribute("data-minicart-enabled"),this.isEnableOdmMiniCart="enabled"===(null===(t=document.querySelector("[data-odm-minicart-enabled]"))||void 0===t?void 0:t.getAttribute("data-odm-minicart-enabled"))}setData(t){this.data=t,this.updateDOM(t),this.handlersInitialized||this.initializeHandlers()}setConfig(t){this.config=t,this.componentId=this.getAttribute("data-buy-component-id")}setSelectedTerm(t){this.billingPeriod=t.term,this.billingPeriodCount=t.count,this.billingPriceId=t.priceId,this.billingQuantity=t.tokenCount}updateCtaURL(t){const e=t.detail;this.componentId===e.id&&(this.setSelectedTerm(e),this.updateDOM(this.data))}openMinicart(t){var e;const i=t.currentTarget;if(t.preventDefault(),this.isReseller||isNaN(this.billingQuantity)||!(null===(e=window.adsk.components)||void 0===e?void 0:e.miniCart))this.redirectCheckoutPage(i);else if(this.isEnableOdmMiniCart)window.adsk.components.miniCart.addItemByUrl(t.currentTarget.getAttribute("href")).catch(()=>{this.redirectCheckoutPage(i)});else{const t={priceId:this.billingPriceId,plc:this.config.plc};window.adsk.components.miniCart.addItem(t).catch(()=>{this.redirectCheckoutPage(i)})}}onCtaClicked(t){t.preventDefault();let e=t.currentTarget.getAttribute("href");window.location=e}redirectCheckoutPage(t){let e=t.getAttribute("href");window.location=e}showInterstitial(){const t=new CustomEvent("SHOW_BUY_COMPONENT_INTERSTITIAL",{detail:{componentId:this.componentId}});document.dispatchEvent(t)}initializeHandlers(){this.config.flex?this.initializeFlexHandlers():this.initializeBuyHandlers(),this.handlersInitialized=!0}initializeBuyHandlers(){"true"===this.config["enable-interstitial"]?this.ctaButton.addEventListener("click",this.showInterstitial.bind(this)):this.isEnableMiniCart?this.ctaButton.addEventListener("click",this.openMinicart.bind(this)):this.ctaButton.addEventListener("click",this.onCtaClicked.bind(this))}initializeFlexHandlers(){G.CTA_CONFIG.flex.btnElementNames.forEach(t=>{if(this[t]){const e="false"===this[t].getAttribute("data-flex-minicart-enabled");"true"===this.config["enable-interstitial"]?this[t].addEventListener("click",this.showInterstitial.bind(this)):this.isEnableMiniCart&&this.isEnableOdmMiniCart&&!e?this[t].addEventListener("click",this.openMinicart.bind(this)):this[t].addEventListener("click",this.onCtaClicked.bind(this))}})}shouldAddGuaranteeText(){return!(this.data.pricingSource===G.PRICING_SOURCE.SRPDB||"true"===this.config["use-alternate-cta-button"])}updateDOM(t){this.initialized=!0,this.isReseller=this.isResellerPricing(t),this.domCreated||(this.config.flex?this.createFlexButtons(!0):this.createBuyButton(!1)),this.setCtaDetails(this.config.flex,t),this.shouldAddGuaranteeText()&&this.setGuaranteeText(),this.setAnalyticsAttributes(t,{term:this.billingPeriod,count:this.billingPeriodCount,priceId:this.billingPriceId,tokens:this.billingQuantity})}createButton(t,e){const i=e?"flex":"buy";return p.createElement("button",X({type:"button",class:G.CTA_CONFIG[i][t].styles},G.CTA_CONFIG[i][t].analytics))}createBuyButton(t){this.createGenericButtonContainer(),this.clearfix=p.createElement("div",{}),this.ctaButton=this.createButton("primary",t),this.buttonText=this.createCtaButtonText("primary"),this.ctaButton.appendChild(this.buttonText),this.guarantee=this.createGuaranteeText(),p.appendChildren(this.clearfix,[this.ctaButton,this.guarantee]),this.buttonContainer.appendChild(this.clearfix),this.appendChild(this.buttonContainer),this.domCreated=!0}createFlexButtons(t){let e=[];this.createGenericButtonContainer(),this.clearfix=p.createElement("div",{class:G.CTA_CONFIG.flex.wrapper.styles}),this.ctaPrimaryButton=this.createButton("primary",t),this.primaryBtnText=this.createCtaButtonText("primary"),p.appendChildren(this.ctaPrimaryButton,[this.primaryBtnText]),e.push(this.ctaPrimaryButton),this.config.onlyFlex||(this.ctaSecondaryButton=this.createButton("secondary",t),this.secondaryBtnText=this.createCtaButtonText("secondary"),p.appendChildren(this.ctaSecondaryButton,[this.secondaryBtnText]),e.push(this.ctaSecondaryButton)),p.appendChildren(this.clearfix,e),this.guarantee=this.createGuaranteeText(),p.appendChildren(this.buttonContainer,[this.clearfix,this.guarantee]),this.appendChild(this.buttonContainer),this.domCreated=!0}createCtaButtonText(t){return p.createElement("span",{class:G.CTA_CONFIG.buttonText[t].styles})}createCtaButtonIcon(){return p.createElement("img",{src:"https://swc.autodesk.com/pharmacopeia/svg/icons/v0/icons/utility/caret-right.svg",class:G.CTA_CONFIG.buy.primary.iconStyles})}createGenericButtonContainer(){const t=this.ppgEnabled?" ppg":"";this.buttonContainer=p.createElement("div",{class:G.CTA_CONFIG.buttonContainer.styles+t})}createGuaranteeText(){return p.createElement("p",X({class:G.CTA_CONFIG.guaranteeText.styles},G.CTA_CONFIG.guaranteeText.analytics))}setAnalyticsAttributes(t,e){this.config.flex?this.setAnalyticsAttributesFlex(e):this.setAnalyticsAttributesBuy(t,e)}setAnalyticsAttributesBuy(t,e){const i=t.productLineCode,n=e.term,s=e.count,r=e.priceId,o=this.isResellerPricing(t)?"find a reseller":"add to cart";this.ctaButton.setAttribute("data-wat-product-line-code",i),this.ctaButton.setAttribute("data-wat-configurator-term",s+"-"+n),this.ctaButton.setAttribute("data-wat-configurator-pid",r),this.ctaButton.setAttribute("data-wat-configurator-link-type",o.toLowerCase())}setAnalyticsAttributesFlex(t){const e=t.tokens,i=t.priceId;this.ctaPrimaryButton.setAttribute("data-wat-configurator-term",e+"-TOKENS"),this.ctaPrimaryButton.setAttribute("data-wat-configurator-pid",i)}setGuaranteeText(){try{let t,e=this.config["flex-legal-text"],i=this.config["flex-legal-hyperlink-url"],n=this.config["flex-legal-hyperlink-text"];if(this.config.flex||"FLEXACCESS"===this.config.plc){let s=p.createElement("a",{href:i},n);s.setAttribute("data-wat-loc","buy flex"),s.setAttribute("data-wat-val","expire 1 year learn more"),t=s.outerHTML,e.match(/\{0\}/)&&(e=p.contentFragmentStringReplacer(e,[t])),this.guarantee.innerHTML=e}else this.guarantee.textContent=this.config["30-day-money-back"]}catch(t){console.error("Error generating guarantee text",t)}}setCtaDetails(t,e){const i=p.getPurchaseType(e);t?this.setCtaFlexDetails(e,i.billingPlans):this.setCtaBuyDetails(e,i.billingPlans)}setCtaBuyDetails(t,e){this.isReseller?this.config["alternate-cta-button-text"]&&this.config["alternate-cta-button-url"]?(this.buttonText.innerHTML=this.config["alternate-cta-button-text"]+this.createCtaButtonIcon().outerHTML,this.ctaButton.setAttribute("href",this.config["alternate-cta-button-url"])):(this.buttonText.innerHTML=this.config["find-a-reseller"]+this.createCtaButtonIcon().outerHTML,this.ctaButton.setAttribute("href",t.resellerUrl)):(this.buttonText.innerHTML=this.config["add-to-cart"]+this.createCtaButtonIcon().outerHTML,this.ctaButton.setAttribute("href",p.getAddToCartURL(e,this.billingPeriod,this.billingPeriodCount,this.billingQuantity,this.config)))}setCtaFlexDetails(t,e){const i=(t,e)=>{t&&e&&(this.ppgEnabled?(t.innerHTML=this.config["ppg-cta-learn-how-flex-works"],e.setAttribute("href",this.config["flex-tooltip-link"]),e.setAttribute("data-flex-minicart-enabled","false")):(t.innerHTML=this.config["flex-estimate-tokens-cta"],e.setAttribute("href",this.config.onlyFlex?this.config["flex-estimator-tool-url"]:this.config["flex-estimator-tool-url"]+"?plc="+this.config.originalPlc)))};((i,n)=>{if(i&&n){let s="",r="";this.isReseller?(s=this.config["find-a-reseller"],r=t.resellerUrl):this.ppgEnabled&&isNaN(this.billingQuantity)?(s=this.config["ppg-cta-estimate-tokens-needed"],r=p.getAddToCartURL(e,this.billingPeriod,this.billingPeriodCount,this.billingQuantity,this.config)):(s=this.config["flex-buy-tokens-cta"],r=p.getAddToCartURL(e,this.billingPeriod,this.billingPeriodCount,this.billingQuantity,this.config)),i.innerHTML=s,n.setAttribute("href",r)}})(this.primaryBtnText,this.ctaPrimaryButton),this.config.onlyFlex||i(this.secondaryBtnText,this.ctaSecondaryButton)}isResellerPricing(t){return t.pricingSource===G.PRICING_SOURCE.SRPDB||"true"===this.config["use-alternate-cta-button"]}connectedCallback(){this.updateCtaURLBind=this.updateCtaURL.bind(this),this.addEventListeners()}disconnectedCallback(){this.innerHTML="",this.removeEventListeners()}addEventListeners(){document.addEventListener("selectTerm",this.updateCtaURLBind)}removeEventListeners(){document&&document.removeEventListener("selectTerm",this.updateCtaURLBind)}}window&&window.customElements&&window.customElements.define("cta-container",J);i(11);class $ extends HTMLElement{constructor(){super()}createDOM(){try{const t=p.createElement("div",{class:"dc-buy-component-currency-arrow"}),e=p.createElement("div",{class:"dc-buy-component-currency-container"}),i=p.createElement("div",{class:"dhig-typography-headline-smaller"});let n;this.wrapperDiv=p.createElement("div",{class:"dc-buy-component-currency-wrapper dhig-typography-headline-smallest dhig-h-7 dhig-w-full dhig-mb-3"}),this.selectorDiv=p.createElement("div",{class:"dc-buy-component-currency-selector dhig-w-full"}),this.placeholderDiv=p.createElement("div",{class:"dc-buy-component-currency-placeholder"}),this.selectedCurrencyDiv=p.createElement("div",{class:"dc-buy-component-currency-selected"}),n=p.convertStrToUniformArr(this.selectedCurrency,u.CURRENCY.separator),this.setOption(this.selectedCurrencyDiv,n),this.wrapperDiv.appendChild(this.selectedCurrencyDiv),this.placeholderDiv.innerHTML=this.currencyConfig.dropdownPlaceholder,this.selectorDiv.appendChild(this.placeholderDiv),this.currencyConfig.optionalCurrencies.forEach(t=>{this.addOption(this.selectorDiv,t,n)}),this.addOption(this.selectorDiv,this.currencyConfig.defaultCurrency,n),this.wrapperDiv.appendChild(this.selectorDiv),t.innerHTML='<svg class="icon-svg-close dhig-w-4 dhig-h-4 dhig-pt-1 dhig-align-middle"><use xlink:href="#dhig--icons--utility--caret-down"></use></svg>',this.wrapperDiv.appendChild(t),i.innerText=this.getAttribute("data-currency-header"),e.appendChild(i),e.appendChild(this.wrapperDiv),this.appendChild(e),p.setLocalStorage(u.CURRENCY.localStorageKey,n.join("|"))}catch(t){console.error("Error creating the currency selector: ",t)}}setOption(t,e){t.innerHTML+='<span class="dc-currency-code">'+e[0]+"</span>";const i=e[1],n=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","use");n.setAttributeNS(null,"class","dc-country-flag dhig-w-5 dhig-h-4"),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","/content/dam/autodesk/icons.svg#icon-flag-"+i),n.appendChild(s),t.appendChild(n)}addOption(t,e,i){const n=p.convertStrToUniformArr(e,u.CURRENCY.separator),s=p.createElement("div",{class:"dc-buy-component-currency-option dhig-pr-5 dhig-pl-3 dhig-w-full dhig-h-7"});this.setOption(s,n),n[0]===i[0]&&s.classList.add("dc-selected"),s.setAttribute("data-currency",n.join(u.CURRENCY.separator)),t.appendChild(s)}setEvents(){try{this.wrapperDiv.addEventListener("click",t=>{t.stopPropagation(),this.selectorDiv.classList.toggle("open")}),this.placeholderDiv.addEventListener("click",t=>{t.stopPropagation()}),Array.from(this.selectorDiv.querySelectorAll(".dc-buy-component-currency-option")).forEach(t=>{t.addEventListener("click",e=>{e.stopPropagation();const i=t.getAttribute("data-currency");this.updateSelected(t),p.setLocalStorage(u.CURRENCY.localStorageKey,i),this.dispatchSelectEvent(i,u.CURRENCY.eventUpdate),this.selectorDiv.classList.remove("open")})}),document.addEventListener("click",t=>{this.selectorDiv.classList.remove("open")})}catch(t){console.error("Error setting currency events: ",t)}}dispatchSelectEvent(t,e){const i=new CustomEvent(e,{detail:{currency:t}});document.dispatchEvent(i)}updateSelected(t){this.selectedCurrencyDiv.innerHTML=t.innerHTML,Array.from(this.selectorDiv.querySelectorAll(".dc-buy-component-currency-option")).forEach(t=>{t.classList.remove("dc-selected")}),t.classList.add("dc-selected")}connectedCallback(){try{this.currencyConfig=JSON.parse(this.getAttribute("data-currency-config")),this.selectedCurrency=this.getAttribute("data-selected-currency"),this.createDOM(),this.setEvents()}catch(t){console.error("Error in the currency callback: ",t)}}setPdsData(t){this.data=t,this.updateDOM(t)}}window&&window.customElements&&window.customElements.define("currency-selector",$);i(12);class K extends HTMLElement{constructor(){super(),this.componentId,this.billingPeriod,this.billingPeriodCount,this.paymentMethodsData=[],this.updatePaymentMethodsBind=null,this.config={},this.counter,this.images}setData(t){const e=p.getPurchaseType(t);t.paymentMethods&&(this.paymentMethodsData.default=t.paymentMethods),Array.isArray(e.billingPlans)&&e.billingPlans.length&&e.billingPlans.forEach(t=>{t.paymentMethods&&t.paymentMethods.length>0&&(this.paymentMethodsData[this.getFormattedId(t.billingPeriodCount,t.billingPeriod)]=t.paymentMethods)})}setTerm(t){this.billingPeriod=t.term,this.billingPeriodCount=t.count}setConfig(t){this.config=t}getFormattedId(t,e){return t+"-"+e}getPaymentMethodId(){return this.billingPeriodCount&&this.billingPeriod?this.getFormattedId(this.billingPeriodCount,this.billingPeriod):"default"}getSelectedPaymentMethodData(){let t=[];return this.paymentMethodsData&&(t=this.paymentMethodsData[this.getPaymentMethodId()],t=t||this.paymentMethodsData.default),t}getImageClass(t){let e=32,i=19;if(t.height>0){const n=e/i;if(t.width/t.height>n)return" wide";if(t.height>i||t.width>e)return" big"}return""}onImageLoad(t,e){this.counter-=1;const i={src:t.src,alt:e.name,class:"dhig-w-full"+this.getImageClass(t),"data-automation-id":"buy-component-payment-methods-"+e.name};t.loaded||p.setAttributes(t,i),t.loaded=!0}fetchImages(){let t=this.getSelectedPaymentMethodData().length;t>0&&(this.counter=t,this.images=[],this.getSelectedPaymentMethodData().map(t=>{let e=new Image;if(!t.iconUrl)return images.push(e),void(this.counter-=1);e.src=t.iconUrl.replace("http://","https://"),e.alt=t.name,e.classList.add("dhig-w-full"),e.dataset.automationId="buy-component-payment-methods-"+t.name,this.images.push(e),e.onload=()=>{this.onImageLoad.call(this,e,t)},e.onerror=t=>{this.counter-=1,console.error("PaymentMethods: onImageLoad",t)}}))}createPaymentMethod(t){return this.paymentMethodImage=this.images[t],this.paymentMethodContainer=p.createElement("div",{class:"dc-payment-method dhig-w-7 dhig-h-5"}),this.paymentMethodContainer.appendChild(this.paymentMethodImage),this.paymentMethodContainer}createDOM(){this.paymentMethods=p.createElement("div",{id:"payment-methods",class:"dhig-inline-flex"});const t=this.getSelectedPaymentMethodData();this.isSelectedPaymentMethodDataValid(t)&&this.setPaymentMethods(t),this.appendChild(this.paymentMethods),this.updatePaymentMethodsBind=this.updatePaymentMethods.bind(this)}isSelectedPaymentMethodDataValid(t){return Array.isArray(t)&&t.length>0}isPaymentMethodDataUpdated(t){let e=!1;try{for(let i=0;i<t.length&&!e;i++)e=!this.selectedPaymentMethodData.hasOwnProperty(t[i].name)}catch(t){console.error("PaymentMethods: isPaymentMethodDataUpdated:",t)}return e}setPaymentMethods(t){try{this.selectedPaymentMethodData={},this.paymentMethods.innerHTML="",this.fetchImages();const e=p.createElement("div",{class:"dc-payment-methods-container dhig-px-1 dhig-p-2 dhig-w-max dhig-gap-1"});t.forEach((t,i)=>{this.selectedPaymentMethodData[t.name]=t.name,e.appendChild(this.createPaymentMethod(i))}),this.setTooltip(e.outerHTML),this.setPaymentMethodsTitle()}catch(t){console.error("PaymentMethods: setPaymentMethods:",t)}}setPaymentMethodsTitle(){const t=p.createElement("span",{class:"dc-payment-methods-title dhig-typography-smallprint dhig-m-0"});t.innerHTML=this.config["payment-methods-title"]?this.config["payment-methods-title"]:"",this.tooltipIcon&&p.appendChildren(t,[this.tooltipIcon]),p.appendChildren(this.paymentMethods,[t])}setTooltip(t){let e={content:t,size:"medium",location:"bottom",arrow:"start",justify:"middle"};this.tooltipIcon=p.createTooltipSvg(e),this.tooltipIcon.setAttribute("data-wat-loc",this.config.flex?"buy flex":"buy subscription"),this.tooltipIcon.setAttribute("data-wat-val","tooltip payment methods available")}updateDOM(){const t=this.getSelectedPaymentMethodData();this.isSelectedPaymentMethodDataValid(t)&&this.isPaymentMethodDataUpdated(t)&&this.setPaymentMethods(t)}updatePaymentMethods(t){this.billingPeriod=t.detail.term,this.billingPeriodCount=t.detail.count,this.updateDOM()}connectedCallback(){this.componentId=this.getAttribute("data-buy-component-id"),this.createDOM(),this.addEventListeners()}disconnectedCallback(){this.innerHTML="",this.removeEventListeners()}addEventListeners(){document.addEventListener("selectTerm",this.updatePaymentMethodsBind)}removeEventListeners(){document&&document.removeEventListener("selectTerm",this.updatePaymentMethodsBind)}}window&&window.customElements&&window.customElements.define("payment-methods",K);i(13);class Z extends HTMLElement{constructor(){super(),this.cartUrl="",this.config={},this.data={},this.modal=document.querySelector("mfe-modal"),this.modal||console.error("mfe-modal not found")}setData(t){this.data=t}getPricingPlans(){return p.getPurchaseType(this.data).billingPlans||{}}setConfig(t){this.config=t,this.componentId=this.getAttribute("data-buy-component-id")}updateCartUrl(t){if(!t.detail)return!1;t.detail.id===this.componentId&&this.setCartUrl(t.detail)}isResellerPricing(t){return t.pricingSource===u.PRICING_SOURCE.SRPDB||"true"===this.config["use-alternate-cta-button"]}setCartUrl(t){const{count:e,term:i,tokenCount:n}=t;this.isResellerPricing(this.data)?this.cartUrl=this.data.resellerUrl:this.cartUrl=p.getAddToCartURL(this.getPricingPlans(),i,e,n,this.config),this.setAttribute("data-cart-url",this.cartUrl)}navigateToCart(){this.cartUrl&&(window.location.href=this.cartUrl)}clickOff(t){"wd-modal"===t.target.className&&this.closeModal()}setModalAnalytics(){const t=document.querySelector(".MuiDialog-root .MuiPaper-root");document.querySelector(".MuiDialog-root .MuiButton-root").setAttribute("data-wat-linkname","continue"),t.setAttribute("data-wat-content-type","dr vendor notification"),t.setAttribute("data-wat-content-name","china modal")}closeModal(){this.modal.closeModal()}openModal(t){t.detail.componentId===this.componentId&&(this.setModalProperties(),this.modal.openModal(),this.setModalAnalytics())}decodeHTML(t){const e=document.createElement("div");return e.innerHTML=t,e.childNodes[0].nodeValue}setModalProperties(){this.modal.castAsModal();const t=this.config["interstitial-content"]||"";this.body=p.createElement("p",{},t);const e={displayHeader:!0,ctaButtonText:this.config["interstitial-btn-text"],secondaryButtonText:"",displayLogo:!0,maxWidth:"Sm",styleVariant:"subdivision",content:this.decodeHTML(t)};this.modal.config=Object.assign({},this.modal.config,e),this.modal.setButtonAction("cta",this.navigateToCartBind)}connectedCallback(){this.closeModalBind=this.closeModal.bind(this),this.clickOffBind=this.clickOff.bind(this),this.navigateToCartBind=this.navigateToCart.bind(this),this.updateCartUrlBind=this.updateCartUrl.bind(this),this.openModalBind=this.openModal.bind(this),this.addEventListeners()}disconnectedCallback(){this.innerHTML="",this.removeEventListeners()}addEventListeners(){document.addEventListener("selectTerm",this.updateCartUrlBind),document.addEventListener("SHOW_BUY_COMPONENT_INTERSTITIAL",this.openModalBind)}removeEventListeners(){document&&(document.removeEventListener("selectTerm",this.updateCartUrlBind),document.removeEventListener("SHOW_BUY_COMPONENT_INTERSTITIAL",this.openModalBind))}}window&&window.customElements&&window.customElements.define("interstitial-popup",Z);i(14);function tt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}class et extends HTMLElement{constructor(){super(),this.componentId,this.componentInitialized=!1,this.attributeMap=p.getAttributeMap(),this.config={},this.productLineCode=""}static getAttributeMap(){return p.getAttributeMap()}static get observedAttributes(){return Object.keys(this.getAttributeMap())}setProductLineCode(t){this.productLineCode=t}createDOM(){this.resellerContainer=p.createElement("div",{class:"dc-buy-component-reseller-component"}),this.appendChild(this.resellerContainer),this.createResellerText(),this.createResellerCTA()}setConfig(t){this.config=t}createResellerText(){this.textContainer=document.createElement("div"),this.resellerText=document.createElement("p"),this.textContainer.appendChild(this.resellerText),this.resellerContainer.appendChild(this.textContainer),this.resellerText.innerHTML=this.config["reseller-component-text"]}createResellerCTA(){this.ctaContainer=p.createElement("div",{class:"sm:dhig-w-full md:dhig-w-1/2 lg:dhig-w-1/3"}),this.resellerCTA=p.createElement("a",function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(i),!0).forEach((function(e){q()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):tt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({class:G.CTA_CONFIG.buy.reseller.styles},G.CTA_CONFIG.buy.reseller.analytics)),this.ctaText=p.createElement("span",{class:G.CTA_CONFIG.buttonText.reseller.styles}),this.resellerCTA.appendChild(this.ctaText),this.ctaContainer.appendChild(this.resellerCTA),this.resellerContainer.appendChild(this.ctaContainer),this.setResellerCtaDetails()}setResellerCtaDetails(){this.ctaText.innerHTML=this.config["alternate-cta-button-text"]+this.createCtaButtonIcon().outerHTML,this.resellerCTA.setAttribute("href",this.config["alternate-cta-button-url"]),this.resellerCTA.setAttribute("data-wat-product-line-code",this.productLineCode)}createCtaButtonIcon(){return p.createElement("img",{src:"https://swc.autodesk.com/pharmacopeia/svg/icons/v0/icons/utility/caret-right.svg",class:G.CTA_CONFIG.buy.reseller.iconStyles})}connectedCallback(){this.componentId=this.getAttribute("data-buy-component-id"),this.createDOM()}disconnectedCallback(){this.innerHTML=""}}window&&window.customElements&&window.customElements.define("reseller-component",et);i(15);var it={defaultCurrency:"USD|US",dropdownPlaceholder:"Para precios y pagos",optionalCurrencies:["COP|CO","CLP|CL","ARS|AR"],site:"es_AR"};class nt extends HTMLElement{constructor(){super(),this.componentId="id-"+((t=21)=>{let e="",i=t;for(;i--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e})(),this.componentInitialized=!1,this.data={},this.promoApplied=!1,this.productsData,this.productInfo,this.termsContainer,this.summaryDrawer,this.ctaContainer,this.currencySelector,this.paymentMethods,this.contactNumbers,this.promoSvg,this.attributeMap=p.getAttributeMap(),this.config={},this.personalized=!1,this.isResellerExperience=!1,this.utilities=p,(((window.adsk=window.adsk||{}).api=window.adsk.api||{}).configs=window.adsk.api.configs||{}).personalizationEngine=window.adsk.api.configs.personalizationEngine||{},window.digitalData=window.digitalData||{}}static get defaultTerm(){return{term:"YEAR",count:"1",tokenCount:"500"}}static get observedAttributes(){return Object.keys(nt.getAttributeMap())}static getAttributeMap(){return p.getAttributeMap()}updateQuantity(t){this.setAttribute("quantity",t.detail.quantity)}updateCurrency(t){this.selectedCurrencyCode=p.convertStrToUniformArr(t.detail.currency,u.CURRENCY.separator)[0],this.ppgEnabled&&"FLEXACCESS"===this.plc||this.subscriptionPpgEnabled?new Promise(t=>{const e=this.selectedCurrencyCode?this.selectedCurrencyCode.toUpperCase():this.currency;return p.addPdsFields(this.data,e,this.config),t(this.data)}).then(t=>{this.processFetchedData(t)}).catch(t=>{console.error("There was an error changing currencies:",t)}):this.performFetch(this.quantity).then(()=>!0).catch(t=>console.error("Failed to update currency",t))}setSelectedTerm(t){this.selectedTerm=t}updateTerm(t){t.detail&&t.detail.id===this.componentId&&t.detail.flex===this.config.flex&&(this.setSelectedTerm(t.detail),this.billingPeriod=this.selectedTerm.term,this.billingPeriodCount=this.selectedTerm.count,this.tokenCount=this.selectedTerm.tokenCount,this.config.flex?this.term=this.tokenCount:this.term=this.billingPeriodCount+"-"+this.billingPeriod)}applyPromo(t){return this.promoApplied=!0,this.performFetch(this.quantity).then(()=>!0).catch(t=>console.error("Failed to get promo information",t)),!0}removePromo(t){return this.promoApplied=!1,this.performFetch(this.quantity).then(()=>!0).catch(t=>console.error("Failed remove promo",t)),!0}setPersonalized(){if(this.termsContainer){let t=this.termsContainer.getPersonalizedSelection();this.billingPeriod=t.term,this.billingPeriodCount=t.count,this.term=this.billingPeriodCount+"-"+this.billingPeriod,this.initializeHistory(),this.termsContainer.setPersonalized(),this.personalized=!0}}unsetPersonalized(){adsk.api.configs.personalizationEngine.unsetLemData(),this.termsContainer.unsetPersonalized(),this.personalized=!1}lemDataSetHandler(){this.setPersonalized()}lemDataUnsetHandler(){this.unsetPersonalized()}shouldAddPaymentMethods(){return!(this.paymentMethods||this.data.pricingSource===u.PRICING_SOURCE.SRPDB||"true"===this.config["use-alternate-cta-button"])}isTermValid(t,e){if(0===Object.keys(this.data).length)return!1;const i=this.data.purchaseTypes.find(t=>"ADVANCED"===t.supportLevel).billingPlans;return e?!!i.find(e=>t===e.billingQuantity):!!i.find(e=>t===e.billingPeriodCount+"-"+e.billingPeriod)}setupResellerComponent(){let t=this.config["alternate-cta-button-url"],e=this.config["alternate-cta-button-text"];t&&e?(this.resellerComponent=document.createElement("reseller-component"),this.resellerComponent.setConfig(this.config),this.resellerComponent.setProductLineCode(this.plc),this.appendChild(this.resellerComponent)):console.error("Could not find alternate cta button url or text"),this.buyContainer=document.querySelector(".mfe-buy-component"),this.buyContainer.classList.add("hidden")}setupMainDivs(t){this.termsDiv||(this.termsDiv=p.createElement("div",{class:"dc-buy-component-terms-container-wrapper md:dhig-w-1/2 md:dhig-mr-7"}),this.totalsDiv=p.createElement("div",{class:"dc-buy-component-summary-drawer-wrapper dhig-mt-5 md:dhig-mt-0 md:dhig-ml-7 md:dhig-w-1/2"}),t.appendChild(this.termsDiv),t.appendChild(this.totalsDiv))}setupTerm(){let t=p.getSelectedTerm(this.config.originalPlc||this.config.plc,!this.config.switched);t||(t=nt.defaultTerm),this.billingPeriod=t.term,this.billingPeriodCount=t.count,this.tokenCount=t.tokenCount||"500",t.flex?this.term=this.tokenCount:this.term=this.billingPeriodCount+"-"+this.billingPeriod;const e=p.getPurchaseType(this.data);!!e.billingPlans.find(t=>t.billingPeriod===this.billingPeriod&&t.billingPeriodCount===this.billingPeriodCount)||(this.billingPeriod=e.billingPlans[0].billingPeriod,this.billingPeriodCount=e.billingPlans[0].billingPeriodCount,this.config.flex?this.term=this.tokenCount:this.term=this.billingPeriodCount+"-"+this.billingPeriod)}setupInterstitialPopup(t,e){this.interstitialPopup||"true"!==this.config["enable-interstitial"]||(this.interstitialPopup=p.createElement("interstitial-popup",t),this.appendChild(this.interstitialPopup),this.interstitialPopup.setConfig(this.config),this.interstitialPopup.setData(this.data),this.interstitialPopup.setCartUrl(e))}setupTermsContainer(t){this.termsContainer||(this.ppgEnabled&&this.config.flex?this.termsContainer=p.createElement("ppg-terms-container",t):(this.termsContainer=p.createElement("terms-container",t),p.setSubscriptionPpgEnabledState.call(this.termsContainer,this.subscriptionPpgEnabled),p.setSubscriptionMyabPpgEnabledState.call(this.termsContainer,this.subscriptionMyabPpgEnabled)),p.setNewBuyPanelEnabledState.call(this.termsContainer,this.newBuyPanelEnabled),this.termsDiv.appendChild(this.termsContainer))}setupCurrencySelector(){!this.currencySelector&&this.currencyConfig&&this.selectedCurrency&&(this.currencySelector=p.createElement("currency-selector",{"data-buy-component-id":this.componentId,"data-currency-config":JSON.stringify(this.currencyConfig),"data-selected-currency":this.selectedCurrency,"data-currency-header":this.currencyHeader}),p.setSubscriptionPpgEnabledState.call(this.currencySelector,this.subscriptionPpgEnabled),this.totalsDiv.appendChild(this.currencySelector))}setupSummaryDrawer(t){this.summaryDrawer||(this.summaryDrawer=p.createElement("summary-drawer",t),p.setPpgEnabledState.call(this.summaryDrawer,this.ppgEnabled),p.setSubscriptionPpgEnabledState.call(this.summaryDrawer,this.subscriptionPpgEnabled),p.setSubscriptionMyabPpgEnabledState.call(this.summaryDrawer,this.subscriptionMyabPpgEnabled),p.setNewBuyPanelEnabledState.call(this.summaryDrawer,this.newBuyPanelEnabled),this.totalsDiv.appendChild(this.summaryDrawer))}setupCtaContainer(t){this.ctaContainer||(this.ctaContainer=p.createElement("cta-container",t),p.setPpgEnabledState.call(this.ctaContainer,this.ppgEnabled),p.setSubscriptionPpgEnabledState.call(this.ctaContainer,this.subscriptionPpgEnabled),this.totalsDiv.appendChild(this.ctaContainer))}setupPaymentMethods(t,e){this.shouldAddPaymentMethods()&&(this.paymentMethods=p.createElement("payment-methods",t),this.paymentMethods.setTerm(e),this.paymentMethods.setData(this.data),this.paymentMethods.setConfig(this.config),this.totalsDiv.appendChild(this.paymentMethods))}setupContactNumbers(t){this.config["contact-number-text"]||this.config["flex-contact-number-text"]?this.contactNumbers||(this.contactNumbers=p.createElement("contact-numbers",t),this.config["contact-numbers"]&&this.contactNumbers.setNumbers(this.config["contact-numbers"]),this.config["flex-contact-numbers"]&&this.contactNumbers.setFlexNumbers(this.config["flex-contact-numbers"]),this.contactNumbers.setContactText(this.config["contact-number-text"]),this.contactNumbers.setFlexContactText(this.config["flex-contact-number-text"]),this.contactNumbers.setPLC(this.config.plc),this.contactNumbers.setLocale(this.config.locale),this.contactNumbers.setURL(this.config["contact-number-url"]),this.contactNumbers.setAlternateCtaButtonState(this.config["use-alternate-cta-button"]),this.totalsDiv.appendChild(this.contactNumbers)):console.warn("BuyContainer: no contact number")}initializeComponents(t,e){var i;this.selectedCurrencyCode&&p.processLatamPrices(t,this.selectedCurrencyCode.toUpperCase()),this.termsContainer.setSelectedTerm(e),this.termsContainer.setPromo(!!t&&!!t.promotionCode),this.termsContainer.setConfig(this.config),this.termsContainer.setData(t),this.summaryDrawer.setSelectedTerm(e),this.summaryDrawer.setConfig(this.config),this.summaryDrawer.setData(t),this.ctaContainer.setSelectedTerm(e),this.ctaContainer.setConfig(this.config),this.ctaContainer.setData(t),this.termsContainerWrapper=document.querySelector(".dc-buy-component-terms-container-wrapper"),this.newBuyPanelEnabled&&(null===(i=t.prices)||void 0===i?void 0:i.length)<=1&&"FLEXACCESS"!=t.productLineCode?(this.termsContainerWrapper.classList.add("hidden"),this.totalsDiv.classList.remove("md:dhig-ml-7")):this.termsContainerWrapper.classList.remove("hidden")}setupDigitalData(){(window.digitalData=window.digitalData||{}).page=window.digitalData.page||{},(window.digitalData=window.digitalData||{}).products=window.digitalData.products||[],window.digitalData.products=window.digitalData.products.concat(this.mapPdsDataToDigitalData()),window.digitalData.page.flexEnabled=this.config.flex?"true":"false"}processFetchedData(t){let e=p.createElement("div",{class:"dc-buy-component dhig-flex dhig-flex-col md:dhig-flex-row"});if(this.setupMainDivs(e),t){u.DEFAULT_CURRENCIES[this.language+"_"+this.country];if(this.ppgEnabled&&"FLEXACCESS"===this.plc||this.subscriptionPpgEnabled){const e=this.selectedCurrencyCode?this.selectedCurrencyCode.toUpperCase():this.currency;p.addPdsFields(t,e,this.config)}this.data=p.normalizeProductInfo(t),p.isFalsy(this.config["use-alternate-cta-button"])||p.setAlternateCTAButton(this.data,this.config),this.setupTerm();const i=this.subscriptionPpgEnabled&&!this.config.flex?p.getPpgPriceId(this.data,this.billingPeriod,this.billingPeriodCount):p.getBillingPriceId(this.data,this.billingPeriod,this.billingPeriodCount,this.tokenCount,this.config.flex),n={term:this.billingPeriod,count:this.billingPeriodCount,tokenCount:this.tokenCount,priceId:i},s={"data-buy-component-id":this.componentId};this.setupInterstitialPopup(s,n),this.setupTermsContainer(s),this.setupCurrencySelector(),this.setupSummaryDrawer(s),this.setupCtaContainer(s),this.setupPaymentMethods(s,n),this.setupContactNumbers(s),document.querySelector("#"+this.componentId).appendChild(e),this.initializeComponents(t,n),setTimeout(this.setupDigitalData.bind(this),500)}else this.isResellerExperience=!0,this.setupResellerComponent();this.closest("buy-component").style.height="",document.dispatchEvent(new CustomEvent("BuyContainerLoaded",{detail:{id:this.componentId}}))}async performFetch(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";(((window.adsk=window.adsk||{}).api=window.adsk.api||{}).pds=window.adsk.api.pds||{}).data=window.adsk.api.pds.data||{};let e=this.selectedCurrencyCode.toUpperCase(),i=Object.keys(window.adsk.api.pds.data)[0]||0;e=e||i;const n=this.ppgEnabled&&"FLEXACCESS"===this.plc||this.subscriptionPpgEnabled?(()=>(window.adsk=window.adsk||{},window.adsk.api=window.adsk.api||{},window.adsk.api.ppg=window.adsk.api.ppg||{},window.adsk.api.ppg.data=window.adsk.api.ppg.data||{},window.adsk.api.ppg.data[this.plc]?window.adsk.api.ppg.data[this.plc]:null))():(()=>window.adsk.api.pds.data[this.plc]?window.adsk.api.pds.data[this.plc]:window.adsk.api.pds.data[e]&&window.adsk.api.pds.data[e][this.plc]?window.adsk.api.pds.data[e][this.plc]:null)(),s=this.config.locale;if(n)return new Promise(t=>{t(n)}).then(t=>this.processFetchedData(t)).catch(t=>console.error("error processing cached pds data",t));{let e,i=["/products/",this.plc,"?country=",this.country,"&language=",this.language,"&quantity=",t,this.promoApplied?"&validSerialNumber=true":"",this.selectedCurrencyCode?"&currency="+this.selectedCurrencyCode.toUpperCase():""];e=this.ppgEnabled&&"FLEXACCESS"===this.plc||this.subscriptionPpgEnabled?"".concat(this.ppgRoot,"/",this.plc,"/",s,"/commercial_single_user.json"):this.host.concat(i.join(""));try{const t=await fetch(e,{method:"GET",mode:"cors",credentials:"same-origin",cache:"default"});if(200===t.status){let e=await t.json();this.processFetchedData(e)}else 404===t.status&&this.processFetchedData(null)}catch(t){console.error("error performing the fetch:",t)}}}getCountryFromLocale(t){return(t=t||document.documentElement.lang)?(t.split("-").length,t.split("-")[1]):"US"}getLanguageFromLocale(t){return(t=t||document.documentElement.lang)?(t.split("-")[0],t.split("-")[0]):"en"}attributeChangedCallback(t,e,i){this.componentInitialized&&(this[this.attributeMap[t]]=i,this.config=JSON.parse(i),this.plc=this.config.plc||"ACDIST",this.performFetch("1").then(()=>!0).catch(t=>console.error("failed to update pds data",t)))}initializeHistory(){const t=this.config.flex?"flex":"subscription",e={term:this.config.flex?this.tokenCount:this.term,tab:t,plc:this.config.originalPlc?this.config.originalPlc:this.config.plc};let i,n,s=window.location.protocol.concat("//",window.location.host),r="",o="";s=s.concat(window.location.pathname);const a=window.location.hash,l=window.location.search.split("?")[1]||null;if(l){n=l.split("&").map(t=>{const i=t.split("="),n=i[0]+(i[1]?"="+(e[i[0]]||i[1]):"");return delete e[i[0]],n}),Object.keys(e).forEach(t=>{o+="&"+t+"="+e[t]}),r="?"+n.join("&")+o}else r="?term=".concat(this.term,"&tab=",t);s=s.concat(r,a),i=this.config.flex?{tokenCount:this.tokenCount}:{term:this.billingPeriod,count:this.billingPeriodCount},window.history.replaceState(i,null,s)}setCurrencyConfig(){this.currencyConfig=null,this.selectedCurrency="",this.selectedCurrencyCode="",this.currencyHeader="";try{const t=this.config.locale?this.config.locale.toLowerCase().replace("-","_"):"";if(t){const e=[it];for(const i of e){const e="object"==typeof i?i:JSON.parse(decodeURIComponent(i));if(t===e.site.toLowerCase()){this.currencyConfig=e,this.currencyConfig.optionalCurrencies=this.currencyConfig.optionalCurrencies.map(t=>p.unifyString(t)),this.selectedCurrency=p.initCurrency(this.currencyConfig.defaultCurrency,this.currencyConfig.optionalCurrencies),this.selectedCurrencyCode=p.convertStrToUniformArr(this.selectedCurrency,u.CURRENCY.separator)[0];break}}this.currencyHeader=this.closest("buy-component").getAttribute("data-currency-header")}}catch(t){console.error("Error init currency: ",t)}}getLocale(t){return t&&"object"==typeof t.config&&t.config.locale?t.config.locale.toLowerCase().replace("-","_"):""}connectedCallback(){this.host=this.closest("buy-component").getAttribute("host")||this.config["pds-host"]||"https://web-engineering-svc.autodesk.com",this.ppgRoot=this.closest("buy-component").getAttribute("ppg-root")||this.config["ppg-host"]||"https://damassets.autodesk.net/ppg/prices",this.productsData=this.config.products||[{title:"Default product title",logo:"https://www.autodesk.com/content/dam/autodesk/www/products/responsive-imagery/responsive-badges-compare/2017/autocad-2017-badge-75x75.png",description:"<p>Default product description</p>"}],this.setCurrencyConfig(),this.plc=this.config.plc||"ACDIST",this.country=this.getCountryFromLocale(this.config.locale),this.language=this.getLanguageFromLocale(this.config.locale),this.support=this.getAttribute("support"),this.billingPeriod=this.getAttribute("billing-period")||"YEAR",this.billingPeriodCount=this.getAttribute("billing-period-count")||"1",this.tokenCount="500",this.config.flex?this.term=this.tokenCount:this.term=this.billingPeriodCount+"-"+this.billingPeriod,this.quantity=this.getAttribute("quantity")||void 0,this.innerHTML='<div class="mfe-buy-component" id="'.concat(this.componentId,'" data-plc="').concat(this.plc,'" data-host="').concat(this.host,'"></div>'),this.promoApplied=this.hasSNCookie(),this.performFetch(this.quantity).then(()=>!0).catch(t=>console.error("failed to update quantity")),this.updateCurrencyBind=this.updateCurrency.bind(this),this.updateQuantityBind=this.updateQuantity.bind(this),this.updateTermBind=this.updateTerm.bind(this),this.applyPromoBind=this.applyPromo.bind(this),this.removePromoBind=this.removePromo.bind(this),this.lemDataSetHandlerBind=this.lemDataSetHandler.bind(this),this.lemDataUnsetHandlerBind=this.lemDataUnsetHandler.bind(this),this.addEventListeners(),this.componentInitialized=!0}disconnectedCallback(){this.innerHTML="",this.removeEventListeners()}hasSNCookie(){const t=adsk.api.configs.sessionVariableName||"sn-trade-in_valid",e=decodeURIComponent(document.cookie);if(-1!==e.indexOf(t)){return"true"===e.split("; ").find(e=>e.startsWith(t)).split("=")[1]}return!1}addEventListeners(){document.addEventListener(u.CURRENCY.eventUpdate,this.updateCurrencyBind),document.addEventListener("updateQuantity",this.updateQuantityBind),document.addEventListener("selectTerm",this.updateTermBind),document.addEventListener("SN_TRADE_IN_FORM_PROMO_SET",this.applyPromoBind),document.addEventListener("SN_TRADE_IN_FORM_PROMO_UNSET",this.removePromoBind)}removeEventListeners(){document&&(document.addEventListener(u.CURRENCY.eventUpdate,this.updateCurrencyBind),document.removeEventListener("updateQuantity",this.updateQuantityBind),document.removeEventListener("selectTerm",this.updateTermBind),document.removeEventListener("SN_TRADE_IN_FORM_PROMO_SET",this.applyPromoBind),document.removeEventListener("SN_TRADE_IN_FORM_PROMO_UNSET",this.removePromoBind))}findAttributeInPrices(t,e){return null==t?void 0:t.find(t=>{return t.additionalAttributes?t.additionalAttributes.term.code===e:(null===(i=t.apolloAttributes)||void 0===i?void 0:i.term.code)===e;var i})}mapFieldsToDigitalData(t,e){var i,n,s,r,o,a;const l={billingPeriod:t.billingPeriod,billingPeriodCount:t.billingPeriodCount};this.config.flex&&(l.billingQuantity=t.billingQuantity);let c=t.promotion.promoCode,d=t.promotion.id,h=t.promotion.promoName||(null===(i=t.price.promotion)||void 0===i?void 0:i.promoName);var u,p,m;this.subscriptionPpgEnabled&&(c=null===(u=t.price.promotion)||void 0===u?void 0:u.promoCode,d=null===(p=t.price.promotion)||void 0===p?void 0:p.promotionId,h=null===(m=t.price.promotion)||void 0===m?void 0:m.promoName);const g={MONTH1:"A02",YEAR1:"A01",YEAR3:"A06"}[l.billingPeriod.toUpperCase()+l.billingPeriodCount];let b,f=this.findAttributeInPrices(this.data.prices,g);f&&(b=f.additionalAttributes?f.additionalAttributes:f.apolloAttributes);const y=null===(n=b)||void 0===n?void 0:n.term.code,C=null===(s=b)||void 0===s?void 0:s.servicePlanID.code,E=null===(r=b)||void 0===r?void 0:r.accessModel.code,v=null===(o=b)||void 0===o?void 0:o.connectivity.code,w=null===(a=b)||void 0===a?void 0:a.intendedUsage.code;return{priceID:t.price.priceId,productBillingPlan:l,productDisplayName:e.name,productExternalKey:e.externalKey,productLine:this.data.productLineCode,pricingSource:this.data.pricingSource,productQuantity:"1",productSupportLevel:e.supportLevel,productType:e.type,term:y,offeringCode:this.data.productLineCode,offeringId:this.data.offeringId,servicePlanIdCode:C,accessModelCode:E,connectivityCode:v,intendedUsageCode:w,productPromotions:{promotionCode:c,promotionID:d,promotionName:h,promotionType:""},productCurrencies:{localCurrency:{currencyCode:this.data.currency,productUnitPriceBeforeDiscountNoTax:null==f?void 0:f.amountBeforeDiscount,productUnitDiscountAmount:null==f?void 0:f.discount,productUnitPriceAfterDiscountNoTax:null==f?void 0:f.amount}}}}isFilterForFlex(t){return null==t.billingQuantity||t.billingQuantity>=u.FLEX_FILTER.minFlexQuantity&&t.billingQuantity<=u.FLEX_FILTER.maxFlexQuantity}mapPdsDataToDigitalData(){let t=[];const e=this,i=p.getPurchaseType(this.data);return i.billingPlans.forEach((function(n){"2"!==n.billingPeriodCount&&(e.isFilterForFlex(n)||e.subscriptionPpgEnabled)&&t.push(e.mapFieldsToDigitalData(n,i))})),t}}window&&window.customElements&&window.customElements.define("buy-container",nt);i(16);class st extends HTMLElement{constructor(){super(),this.config={},this.showIncentives=!1,this.showFlexIncentives=!1}connectedCallback(){this.createDOM()}setConfig(t){this.config=t,this.showIncentives=this.config["show-incentives"],this.showFlexIncentives=this.flexIncentivesEnabled&&this.config["show-flex-incentives"]}createDOM(){if(!this.incentivesPanel&&(this.showIncentives||this.showFlexIncentives)){this.incentivesPanel=p.createElement("div",{class:"dhig-flex dhig-flex-col buy-incentives-panel"});const t=p.createElement("hr",{class:"MuiDivider-root dhig-w-full dhig-my-4"}),e=p.createElement("div",{class:"dhig-flex dhig-flex-col buy-incentives-wrapper"});p.appendChildren(this.incentivesPanel,[t,e]);const i=this.flexIncentivesEnabled&&this.config.flex?"flex-":"",n=Object.keys(this.config).filter(t=>t.substr(0,10+(null==i?void 0:i.length))===i+"incentive-").sort(),s=this.flexIncentivesEnabled&&this.config.flex?5:4;n.reduce((t,e,i)=>(i%s||t.push(n.slice(i,i+s)),t),[]).forEach((t,n)=>{const s=t.find(t=>t===i+"incentive-"+(n+1)+"-text");let r=!1;if(this.flexIncentivesEnabled&&this.config.flex&&this.config["flexIncentive"+(n+1)+"HidePlcs"]){r=JSON.parse("["+this.config["flexIncentive"+(n+1)+"HidePlcs"].replace(/\n/g,",")+"]").some(t=>t["flexIncentive"+(n+1)+"HidePlc"]===(this.config.originalPlc||this.config.plc))}if(this.config[s]&&!r){const t=[],s=!this.config[i+"incentive-"+(n+1)+"-image"],r=p.createElement("div",{class:"text-link buy-incentive"}),o=p.createElement("div",{class:"dhig-typography-body-copy-small"});if(this.config[i+"incentive-"+(n+1)+"-image"]){const e=p.createElement("img",{src:this.config[i+"incentive-"+(n+1)+"-image"],class:"buy-incentive-image"});t.push(e)}const a=p.createElement("a",{class:"MuiTypography-root MuiLink-root MuiLink-underlineHover incentives-link"+(s?" decorated":""),href:this.config[i+"incentive-"+(n+1)+"-href"],target:"true"===this.config[i+"incentive-"+(n+1)+"-link-new-tab"]?"_blank":"","data-wat-loc":"buy"+(this.config.flex?" flex":""),"data-wat-val":this.config[i+"incentive-"+(n+1)+"-data-wat-val"]||i+"incentive panel link "+(n+1)}),l=p.createElement("span",{class:"cmp-text-link__link-text"},this.config[i+"incentive-"+(n+1)+"-text"]);t.push(l),p.appendChildren(a,t);const c=p.createElement("hr",{class:"MuiDivider-root MuiDivider-vertical"});o.appendChild(a),r.appendChild(o),p.appendChildren(e,[r,c])}}),this.appendChild(this.incentivesPanel)}}}window&&window.customElements&&window.customElements.define("incentives-component",st);i(17),i(18);class rt extends HTMLElement{constructor(){super(),this.switched=!1,this.buyContainerLoadedHandlerBind=this.buyContainerLoadedHandler.bind(this),document.addEventListener("BuyContainerLoaded",this.buyContainerLoadedHandlerBind)}buyContainerLoadedHandler(t){t.detail.id!==this.subscribeBuy.componentId||this.tabsList&&!this.isTabActive(this.subscribeTab)?!this.flexBuy||t.detail.id!==this.flexBuy.componentId||this.tabsList&&!this.isTabActive(this.flexTab)||this.flexBuy.initializeHistory():this.subscribeBuy.initializeHistory()}createDOM(){const t=document.documentElement.getAttribute("data-flex-incentives-enabled");this.flexIncentivesEnabled=t&&"enabled"===t,this.config.flex&&"FLEXACCESS"!==this.config.plc?this.createTabs():this.createDiv()}updateDOM(){this.config.flex?this.updateTabs():this.updateDiv()}isFlexActive(t){if(location.search.indexOf("tab=")>=0)return location.search.indexOf("tab=flex")>=0;if(!t)return!1;const e="nonsensitive-bc-term-"+t+"-"+(document.documentElement.lang||"en-US"),i=window.sessionStorage.getItem(e);if(i)try{return JSON.parse(i).flex}catch(t){return!1}return!1}createIncentives(t,e){const i=document.createElement("incentives-component");p.setFlexIncentivesEnabledState.call(i,this.flexIncentivesEnabled),i.setConfig(t),e.appendChild(i),this.flexIncentivesEnabled&&t.flex?this.flexIncentives=i:this.incentives=i}createTabs(){const t=this.isFlexActive(this.config.plc);this.tabsList=p.createElement("ol",{class:"cmp-tabs__tablist dhig-flex dhig-gap-7 dhig-flex-wrap dhig-mt-4 dhig-mb-6 dhig-pl-0"}),this.flexTab=p.createElement("li",{class:"cmp-tabs__tab flex dhig-typography-body-copy-medium dhig-pb-3 dhig-pr-1 dhig-flex"+(this.config.defaultToFlex||t?" cmp-tabs__tab--active":"")}),this.newFeature=p.createElement("div",{class:"dc-new-feature dhig-self-center dhig-typography-smallprint dhig-px-3 dhig-py-1 dhig-ml-2"}),this.newFeature.innerHTML=this.flexTabNewString,this.flexTab.innerHTML="<span class='dhig-pt-1'>"+this.flexTabString+"</span>",this.setAnalyticsAttributes(!0,this.flexTab),this.flexTab.appendChild(this.newFeature),this.subscribeTab=p.createElement("li",{class:"cmp-tabs__tab dhig-typography-body-copy-medium dhig-pb-3 dhig-pr-1 dhig-flex"+(this.config.defaultToFlex||t?"":" cmp-tabs__tab--active")}),this.subscribeTab.innerHTML="<span class='dhig-pt-1'>"+this.subscribeTabString+"</span>",this.setAnalyticsAttributes(!1,this.subscribeTab),p.appendChildren(this.tabsList,[this.subscribeTab,this.flexTab]),this.flexItem=p.createElement("div",{class:"cmp-tabs__tabpanel"+(this.config.defaultToFlex||t?" cmp-tabs__tabpanel--active":""),id:"flex-tabpanel"}),this.subscribeItem=p.createElement("div",{class:"cmp-tabs__tabpanel"+(this.config.defaultToFlex||t?"":" cmp-tabs__tabpanel--active"),id:"subscribe-tabpanel"}),this.flexBuy=document.createElement("buy-container"),p.setPpgEnabledState.call(this.flexBuy,this.ppgEnabled),p.setSubscriptionPpgEnabledState.call(this.flexBuy,this.subscriptionPpgEnabledState),p.setSubscriptionMyabPpgEnabledState.call(this.flexBuy,this.subscriptionMyabPpgEnabled),p.setNewBuyPanelEnabledState.call(this.flexBuy,this.newBuyPanelEnabled),this.subscribeBuy=document.createElement("buy-container"),p.setPpgEnabledState.call(this.subscribeBuy,this.ppgEnabled),p.setSubscriptionPpgEnabledState.call(this.subscribeBuy,this.subscriptionPpgEnabled),p.setSubscriptionMyabPpgEnabledState.call(this.subscribeBuy,this.subscriptionMyabPpgEnabled),p.setNewBuyPanelEnabledState.call(this.subscribeBuy,this.newBuyPanelEnabled),this.subscribeBuy.config=Object.assign({},this.config),delete this.subscribeBuy.config.flex;let e={flex:!0,plc:"FLEXACCESS",originalPlc:this.config.plc,switched:this.switched};this.flexBuy.config=Object.assign({},this.config,e),this.subscribeBuy.setAttribute("config",JSON.stringify(this.subscribeBuy.config)),this.flexBuy.setAttribute("config",JSON.stringify(this.flexBuy.config));const i=t?this.flexBuy.config["flex-tokens"]:this.flexBuy.config["product-name"],n=this.closest("buy-component").getAttribute("id");window.dispatchEvent(new CustomEvent("configUpdate",{detail:{id:n,productName:i}})),this.subscribeItem.appendChild(this.subscribeBuy),this.shouldShowIncentives(this.subscribeBuy.config)&&!this.incentives&&this.createIncentives(this.subscribeBuy.config,this.subscribeItem),this.flexItem.appendChild(this.flexBuy),this.shouldShowFlexIncentives(this.flexBuy.config)&&!this.flexIncentives&&this.createIncentives(this.flexBuy.config,this.flexItem),p.appendChildren(this,[this.tabsList,this.subscribeItem,this.flexItem]),Object.keys(this.flexBuy.data).length>0&&this.setTerm(this.flexBuy,!(!this.config.defaultToFlex&&!t)),Object.keys(this.subscribeBuy.data).length>0&&this.setTerm(this.subscribeBuy,!this.config.defaultToFlex&&!t),this.newPlc=null,this.ppgEnabled||this.createTabTooltip()}clearParameters(){const t=(window.location.search+window.location.hash).split("&").filter(t=>"term="!==t.substr(0,5)&&"tab="!==t.substr(0,4)).join("&");window.history.replaceState({},null,window.location.origin+window.location.pathname+t)}updateTabs(){this.switched=!0;const t=this.config.originalPlc?this.config["flex-tokens"]:this.config["product-name"],e=this.closest("buy-component").getAttribute("id");window.dispatchEvent(new CustomEvent("configUpdate",{detail:{id:e,productName:t}})),this.container&&this.removeDiv(),this.tabsList&&(this.removeTabs(),this.removeEventListeners()),this.clearParameters(),this.createTabs(),this.addEventListeners()}removeTabs(){const t=this.tabsList.parentElement;this.tabTooltip&&this.flexTab.removeChild(this.tabTooltip),t.removeChild(this.tabsList),t.removeChild(this.subscribeItem),t.removeChild(this.flexItem),this.tabsList=null,this.subscribeItem=null,this.flexItem=null,this.tabTooltip=null,this.incentives=null}updateDiv(){this.switched=!0;const t=this.config.originalPlc?this.config["flex-tokens"]:this.config["product-name"],e=this.closest("buy-component").getAttribute("id");window.dispatchEvent(new CustomEvent("configUpdate",{detail:{id:e,productName:t}})),this.container&&this.removeDiv(),this.tabsList&&this.removeTabs(),this.createDiv(),this.subscribeBuy.initializeHistory()}removeDiv(){this.container.parentElement.removeChild(this.container),this.container=null,this.incentives=null}setTerm(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i={count:"1",term:"YEAR"},n=p.getParameterValue("plc");const s=t.config.originalPlc||t.config.plc;let r=t.termsContainer?t.termsContainer.selectedTerm:null;if(!r){const e=t.term.split("-");e.length>1&&(r={term:e[1],count:e[0]}),r={tokenCount:e[0]}}if(n=n||t.config.plc,"FLEXACCESS"===t.config.plc)i=p.getSelectedTerm(s,!!t.config.onlyFlex),t.term=i&&i.flex?i.tokenCount:r.tokenCount,t.tokenCount=t.term||"500";else{t.isResellerExperience||(i=p.getSelectedTerm(s,!1)),t.term=i&&!i.flex?i.count+"-"+i.term:r.count+"-"+r.term;const e=t.term.split("-");t.billingPeriodCount=e[0]||"1",t.billingPeriod=e[1]?e[1]:"YEAR"}!e||s!==n&&s!==this.newPlc||t.initializeHistory()}setAnalyticsAttributes(t,e){const i=t?"flex":"subscription";e.setAttribute("data-wat-val",i),e.setAttribute("data-wat-loc","buy container")}shouldShowIncentives(t){return"true"===t["show-incentives"]&&"true"!==t["hide-incentives-for-product"]}shouldShowFlexIncentives(t){return this.flexIncentivesEnabled&&"true"===t["show-flex-incentives"]&&"true"!==t["hide-flex-incentives-for-product"]}createDiv(){this.container=p.createElement("div",{class:"buy-container-wrapper"}),this.subscribeBuy=document.createElement("buy-container"),p.setPpgEnabledState.call(this.subscribeBuy,this.ppgEnabled),p.setSubscriptionPpgEnabledState.call(this.subscribeBuy,this.subscriptionPpgEnabled),p.setSubscriptionMyabPpgEnabledState.call(this.subscribeBuy,this.subscriptionMyabPpgEnabled),p.setNewBuyPanelEnabledState.call(this.subscribeBuy,this.newBuyPanelEnabled),"FLEXACCESS"===this.config.plc?(this.subscribeBuy.config=Object.assign({},this.config,{flex:!0,onlyFlex:!0,switched:this.switched}),this.subscribeBuy.setAttribute("config",JSON.stringify(this.subscribeBuy.config)),this.landingPageText=p.createElement("p",{class:"dhig-typography-body-copy-large dhig-m-0 dhig-mb-6"},this.config["ppg-landing-page-text-share-tokens"]),this.container.appendChild(this.landingPageText)):(this.subscribeBuy.config=Object.assign({},this.config,{switched:this.switched}),this.subscribeBuy.setAttribute("config",JSON.stringify(this.subscribeBuy.config))),this.container.appendChild(this.subscribeBuy),this.appendChild(this.container);const t=this.shouldShowFlexIncentives(this.subscribeBuy.config)&&!this.flexIncentives&&"FLEXACCESS"===this.config.plc;(this.shouldShowIncentives(this.subscribeBuy.config)&&!this.incentives&&"FLEXACCESS"!==this.config.plc||t)&&this.createIncentives(this.subscribeBuy.config,this.container),Object.keys(this.subscribeBuy.data).length>0&&this.setTerm(this.subscribeBuy,!0),this.newPlc=null}isTabActive(t){return t.classList.contains("cmp-tabs__tab--active")}selectTab(t){if(this.isTabActive(t.currentTarget))return;const e=Array.from(this.querySelectorAll(".cmp-tabs__tab")),i=Array.from(this.querySelectorAll(".cmp-tabs__tabpanel"));e.forEach(t=>{t.classList.toggle("cmp-tabs__tab--active")}),i.forEach(t=>{if(t.classList.toggle("cmp-tabs__tabpanel--active"),t.classList.contains("cmp-tabs__tabpanel--active")){const e=t.querySelector("buy-container"),i=e.config.originalPlc||e.config.plc;this.setTerm(e,!0);let n=p.getSelectedTerm(i,!1);const s=e.config.originalPlc?e.config["flex-tokens"]:e.config["product-name"],r=this.closest("buy-component").getAttribute("id");let o;if(window.dispatchEvent(new CustomEvent("configUpdate",{detail:{id:r,productName:s}})),!e.isResellerExperience){o=e.termsContainer.selectedTerm,o.flex=!!e.config.flex,o.id=e.componentId,n&&n.flex===e.config.flex&&(o=n,o.id=e.componentId);const t=new CustomEvent("selectTerm",{detail:o});document.dispatchEvent(t)}}}),document.dispatchEvent(new CustomEvent("Buy-SelectTab"))}setConfig(t){this.config=t,this.subscribeTabString=this.config["flex-subscription-tab"]||"Subscription",this.flexTabString=this.config["flex-tab"]||"Flex",this.flexTabNewString=this.config["flex-new"]||"New"}setNewPlc(t){this.newPlc=t}createTabTooltip(){try{this.tabTooltip?console.log("BuyComponent.setTabTooltip: no tooltip"):(this.tabTooltip=document.createElement("tab-tooltip"),this.tabTooltip.setConfig(this.config),this.tabTooltip.setTooltipParent(this.flexTab),this.flexTab.appendChild(this.tabTooltip))}catch(t){console.error("BuyComponent.setTabTooltip:",t)}}connectedCallback(){let t=this.closest(".dhig-theme--dark")?"dhig-theme--dark":"dhig-theme--light";this.setAttribute("class","cmp-tabs "+t+" dhig-mt-6 dhig-pb-8"),this.createDOM(),this.addEventListeners()}disconnectedCallback(){this.removeEventListeners()}addEventListeners(){this.selectTabBind=this.selectTab.bind(this),Array.from(this.querySelectorAll(".cmp-tabs__tab")).forEach(t=>{t.addEventListener("click",this.selectTabBind)})}removeEventListeners(){if(document){Array.from(this.querySelectorAll(".cmp-tabs__tab")).forEach(t=>{t.removeEventListener("click",this.selectTabBind)})}}}window&&window.customElements&&window.customElements.define("tabs-component",rt);i(22);class ot extends HTMLElement{constructor(){super(),this.componentInitialized=!1,this.defaultToFlex=!0,this.selectTabBind=null,this.attributeMap=p.getAttributeMap()}static get observedAttributes(){return Object.keys(ot.getAttributeMap())}static getAttributeMap(){return p.getAttributeMap()}attributeChangedCallback(t,e,i){if(this.componentInitialized&&(this[this.attributeMap[t]]=i,this.initConfig()))if(this.config["include-flex"]){const t=Object.assign({},JSON.parse(i),{plc:this.plc,defaultToFlex:this.defaultToFlex});this.tabs.setConfig(t),this.tabs.updateTabs()}else this.tabs.setConfig(JSON.parse(i)),this.tabs.updateDiv()}getConfigFromPlc(t){return this.configs.find(e=>e.plc===t)}setAnalyticsProductVersion(t){window.__analyticsChangeContext=window.__analyticsChangeContext||[],window.__analyticsChangeContext.push({eventData:{eventName:"filter_selected",values:{activeFilters:[{filterCategory:"product version",filterName:t}]}}})}optionChangeHandler(t){this.style.height=this.clientHeight+"px";let e=this.getConfigFromPlc(t.value);this.setAnalyticsProductVersion(t.value),!0===e["include-flex"]?(e=Object.assign({},e,{flex:!0}),this.tabs.setConfig(e),this.tabs.setNewPlc(t.value),this.tabs.updateTabs()):(this.tabs.setConfig(e),this.tabs.updateDiv()),document.dispatchEvent(new CustomEvent("Buy-Changed"))}createRadioIcon(){const t=p.createElementNS("http://www.w3.org/2000/svg","svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),e=p.createElementNS("http://www.w3.org/2000/svg","rect",{x:"0.5",y:"0.5",width:"19",height:"19",rx:"9.5",fill:"white"}),i=p.createElementNS("http://www.w3.org/2000/svg","rect",{x:"0.5",y:"0.5",width:"19",height:"19",rx:"9.5",stroke:"black"}),n=p.createElementNS("http://www.w3.org/2000/svg","circle",{cx:"10",cy:"10",r:"5",fill:"black"});return n.style.display="none",p.appendChildren(t,[e,i,n]),t}resetRadioButtons(t){const e=t.querySelectorAll(".MuiButtonBase-root"),i=t.querySelectorAll("circle");e.forEach(t=>t.classList.remove("Mui-checked")),i.forEach(t=>t.style.display="none")}onRadioButtonChange(t,e){const i=e.querySelector(".MuiButtonBase-root"),n=e.querySelector("input"),s=e.querySelector("circle");this.resetRadioButtons(t),n.checked&&(i.classList.add("Mui-checked"),s.style.display="block",this.optionChangeHandler(n))}createRadioButtonMenu(){const t=p.getParameterValue("plc"),e=p.createElement("div",{class:"dhig-flex dhig-flex-col md:dhig-flex-row md:dhig-ml-5 sm:dhig-mt-3 md:dhig-mt-0 radio-button-bar",role:"radiogroup"});return this.configs.forEach(i=>{const n=p.createElement("label",{class:"MuiFormControlLabel-root dhig-mr-4"}),s=p.createElement("span",{class:"MuiButtonBase-root MuiIconButton-root PrivateSwitchBase-root-1 MuiRadio-root MuiRadio-colorSecondary MuiIconButton-colorSecondary"}),r=p.createElement("span",{class:"MuiIconButton-label"}),o=p.createElement("input",{type:"radio",class:"PrivateSwitchBase-input-4",value:i.plc,name:"buyMFEVersionRadio"});o.addEventListener("change",t=>this.onRadioButtonChange(e,n));const a=this.createRadioIcon(),l=p.createElement("span",{class:"MuiTypography-root MuiFormControlLabel-label MuiTypography-body1 dhig-align-middle"},i["product-name"]);p.appendChildren(r,[o,a]),p.appendChildren(s,[r]),p.appendChildren(n,[s,l]),p.appendChildren(e,[n]),i.plc===t&&(o.setAttribute("checked","checked"),s.classList.add("Mui-checked"),a.querySelector("circle").style.display="block")}),[e]}createSwitcher(){const t=p.createElement("select",{class:"buy-version-switcher"}),e=p.createElement("img",{src:"https://swc.autodesk.com/pharmacopeia/svg/icons/v0/icons/utility/caret-down.svg",class:"sm:dhig-mt-7 md:dhig-mt-2",style:"filter: invert(1);position: absolute; right: 10px; pointer-events: none;"}),i=p.getParameterValue("plc");return this.configs.forEach(e=>{const n=document.createElement("option");n.setAttribute("value",e.plc),e.plc===i&&n.setAttribute("selected","selected"),n.innerHTML=e["product-name"],t.appendChild(n)}),t.addEventListener("change",()=>this.optionChangeHandler(t.options[t.selectedIndex])),[t,e]}createOptionsWrapper(){const t=this.config["version-switcher-label"]||"VERSION",e=p.createElement("span",{class:"dhig-typography-headline-smaller md:dhig-self-center dhig-mr-3"},t),i=p.createElement("div",{class:"dc-buy-component dhig-flex dhig-flex-col md:dhig-flex-row"}),n=p.createElement("div",{class:"md:dhig-mr-7 dhig-mt-6 dhig-flex dhig-flex-col md:dhig-flex-row",style:"position: relative"}),s=2===this.configs.length?this.createRadioButtonMenu():this.createSwitcher();return p.appendChildren(n,[e,...s]),p.appendChildren(i,[n]),i}createOptionSwitcher(){this.configs.length>1&&(this.optionsWrapper=this.createOptionsWrapper(),this.appendChild(this.optionsWrapper))}createDOM(){let t=this.getAttribute("class");this.setAttribute("class","buy-component"+(t?" "+t:"")),this.heading=p.createElement("h2",{class:"dhig-typography-headline-medium dhig-pt-6 dhig-mb-0"});const e="FLEXACCESS"===this.configs[0].plc?this.configs[0]["flex-tokens"]:this.configs[0]["product-name"];this.setHeader(e),this.appendChild(this.heading),this.createOptionSwitcher(),this.tabs=document.createElement("tabs-component"),p.setPpgEnabledState.call(this.tabs,this.ppgEnabled),p.setSubscriptionPpgEnabledState.call(this.tabs,this.subscriptionPpgEnabled),p.setSubscriptionMyabPpgEnabledState.call(this.tabs,this.subscriptionMyabPpgEnabled),p.setNewBuyPanelEnabledState.call(this.tabs,this.newBuyPanelEnabled);const i=Object.assign({},this.config,{flex:this.includeFlex,plc:this.plc,defaultToFlex:this.defaultToFlex});this.tabs.setConfig(i),this.appendChild(this.tabs)}initConfig(){const t=this.getAttribute("configs");if(!t)return console.error("Configuration attribute is empty"),!1;const e=JSON.parse(t);if(this.configs=e.map(t=>{const e=JSON.parse(t),i={};return Object.entries(e).map(t=>{let[e,n]=t;return i[e]=this.decodeString(n)}),i}),!this.configs[0])return console.error("No configuration to set up"),!1;const i=p.getParameterValue("plc"),n=this.configs.find(t=>t.plc===i);return this.config=n||this.configs[0],this.includeFlex=!0===this.config["include-flex"],this.defaultToFlex="true"===this.config["default-to-flex"],this.plc=this.config.plc,!0}decodeString(t){try{return"string"!=typeof t?t:decodeURIComponent(t)}catch(t){console.warn("decodeURIComponent failed, trying without decoding")}}setHeader(t){t=t.replace(/ \(.*\)$/,""),this.heading.innerHTML=this.buyHeader.replace(/\{0\}/,t)}setHeaderHandler(t){const e=this.getAttribute("id");t.detail.id===e&&this.setHeader(t.detail.productName)}connectedCallback(){const t=this.setHeaderHandler.bind(this);if(window.addEventListener("configUpdate",t),this.initConfig()){const t=this.getAttribute("data-ppg-enabled");this.ppgEnabled=t&&"enabled"===t;const e=document.documentElement.getAttribute("data-subscription-ppg-enabled");this.subscriptionPpgEnabled=e&&"enabled"===e;const i=document.documentElement.getAttribute("data-myab-ppg-enabled");this.subscriptionMyabPpgEnabled=i&&"enabled"===i;const n=document.documentElement.getAttribute("data-new-buy-panel");this.newBuyPanelEnabled=n&&"enabled"===n,this.buyHeader=this.config["buy-heading"]||"Buy {0}",this.createDOM(),this.componentInitialized=!0}}}window&&window.customElements&&window.customElements.define("buy-component",ot)}]);
//# sourceMappingURL=dhig.js.map